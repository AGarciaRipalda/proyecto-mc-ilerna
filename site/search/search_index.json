{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"An\u00e1lisis y Dise\u00f1o del Ecosistema de Datos: Mc Ilerna Albor Croft","text":"<p>!!! info \"Datos del Proyecto\"     Establecimiento: Mc Ilerna Albor Croft Ubicaci\u00f3n: Jerez de la Frontera Centro de Formaci\u00f3n: Albor Croft M\u00f3dulo: Administraci\u00f3n de Sistemas Gestores de Bases de Datos Ciclo: Administraci\u00f3n de Sistemas Inform\u00e1ticos en Red (ASIR) A\u00f1o: 2026</p>"},{"location":"#introduccion-y-contextualizacion","title":"Introducci\u00f3n y Contextualizaci\u00f3n","text":"<p>La gesti\u00f3n eficiente de un establecimiento de comida r\u00e1pida en la actualidad no solo depende de la calidad de sus productos o de la rapidez de su servicio, sino fundamentalmente de la robustez y precisi\u00f3n de sus sistemas de informaci\u00f3n. </p> <p>El proyecto para Mc Ilerna Albor Croft nace de la necesidad de integrar m\u00faltiples canales de venta, como la atenci\u00f3n en ventanilla y el reparto a domicilio, bajo un \u00fanico marco relacional que permita no solo la operativa diaria, sino tambi\u00e9n la extracci\u00f3n de conocimiento estrat\u00e9gico a trav\u00e9s de estad\u00edsticas detalladas. </p> <p>Este informe documenta de manera exhaustiva el proceso de dise\u00f1o, modelado e implementaci\u00f3n de dicha base de datos, asegurando que cada decisi\u00f3n arquitect\u00f3nica responda a los requisitos de integridad, escalabilidad y rendimiento exigidos en el entorno de la Administraci\u00f3n de Sistemas Gestores de Bases de Datos.</p> <p>La infraestructura de informaci\u00f3n se sit\u00faa en un contexto geogr\u00e1fico y educativo espec\u00edfico, vincul\u00e1ndose al centro Albor Croft en Jerez de la Frontera, donde la formaci\u00f3n en ASIR impulsa el desarrollo de soluciones tecnol\u00f3gicas aplicadas a la industria local.</p>"},{"location":"analisis/","title":"An\u00e1lisis de Requisitos y Normalizaci\u00f3n","text":""},{"location":"analisis/#requisitos-funcionales","title":"Requisitos Funcionales","text":"<p>El sistema de base de datos para Mc Ilerna Albor Croft debe satisfacer los siguientes requisitos funcionales identificados durante las reuniones con el cliente:</p>"},{"location":"analisis/#rf-01-gestion-unificada-de-pedidos","title":"RF-01: Gesti\u00f3n Unificada de Pedidos","text":"<p>El sistema debe mantener una numeraci\u00f3n correlativa \u00fanica para todos los pedidos, independientemente del canal de venta (ventanilla o domicilio). Esto permite: - Trazabilidad completa de todas las operaciones - Auditor\u00eda contable sin duplicidades - Estad\u00edsticas consolidadas de volumen de negocio</p>"},{"location":"analisis/#rf-02-diferenciacion-de-canales-de-venta","title":"RF-02: Diferenciaci\u00f3n de Canales de Venta","text":"<p>Aunque la numeraci\u00f3n sea \u00fanica, el sistema debe capturar informaci\u00f3n espec\u00edfica seg\u00fan el tipo de pedido:</p> Canal Atributos Espec\u00edficos Ventanilla N\u00famero de ventanilla de atenci\u00f3n Domicilio Tel\u00e9fono de contacto, poblaci\u00f3n, direcci\u00f3n de entrega, repartidor asignado"},{"location":"analisis/#rf-03-gestion-de-repartidores","title":"RF-03: Gesti\u00f3n de Repartidores","text":"<p>El sistema debe registrar y gestionar la informaci\u00f3n de los repartidores: - Datos personales: Nombre, apellidos, DNI (\u00fanico) - Datos de contacto: Tel\u00e9fono - Datos log\u00edsticos: Matr\u00edcula de la moto - Datos operativos: Turno de trabajo (Ma\u00f1ana, Tarde, Noche)</p> <p>Restricci\u00f3n: Cada pedido a domicilio debe tener asignado exactamente un repartidor.</p>"},{"location":"analisis/#rf-04-catalogo-de-productos-y-menus","title":"RF-04: Cat\u00e1logo de Productos y Men\u00fas","text":"<p>El sistema debe diferenciar entre:</p> <p>Productos individuales: - C\u00f3digo \u00fanico - Nombre descriptivo - Ingredientes (texto libre para gesti\u00f3n de al\u00e9rgenos) - Precio unitario</p> <p>Men\u00fas: - C\u00f3digo \u00fanico - Nombre comercial - Descripci\u00f3n - Precio del men\u00fa (puede ser diferente a la suma de productos) - Composici\u00f3n: lista de productos que lo integran con sus cantidades</p>"},{"location":"analisis/#rf-05-lineas-de-pedido","title":"RF-05: L\u00edneas de Pedido","text":"<p>Cada pedido puede contener: - M\u00faltiples productos individuales (con cantidad) - M\u00faltiples men\u00fas (con cantidad) - Registro del precio de venta en el momento del pedido (para hist\u00f3rico)</p>"},{"location":"analisis/#rf-06-escalabilidad-futura","title":"RF-06: Escalabilidad Futura","text":"<p>El dise\u00f1o debe permitir la integraci\u00f3n futura de: - Aplicaciones m\u00f3viles - T\u00f3tems de autoservicio - Sistemas de predicci\u00f3n de demanda</p>"},{"location":"analisis/#requisitos-no-funcionales","title":"Requisitos No Funcionales","text":""},{"location":"analisis/#rnf-01-integridad-de-datos","title":"RNF-01: Integridad de Datos","text":"<ul> <li>Integridad referencial: Todas las relaciones deben estar protegidas con claves for\u00e1neas</li> <li>Integridad de dominio: Validaci\u00f3n de precios (&gt; 0), cantidades (&gt; 0), turnos (M/T/N)</li> <li>Integridad de entidad: Claves primarias autoincrementales sin nulos</li> </ul>"},{"location":"analisis/#rnf-02-rendimiento","title":"RNF-02: Rendimiento","text":"<ul> <li>Motor de almacenamiento InnoDB para soporte transaccional</li> <li>\u00cdndices en columnas de b\u00fasqueda frecuente (Fecha, Num_Repartidor)</li> <li>Optimizaci\u00f3n para consultas de estad\u00edsticas</li> </ul>"},{"location":"analisis/#rnf-03-seguridad-y-privacidad","title":"RNF-03: Seguridad y Privacidad","text":"<ul> <li>Cumplimiento RGPD para datos personales de empleados y clientes</li> <li>Backups incrementales horarios</li> <li>Auditor\u00eda de operaciones cr\u00edticas</li> </ul>"},{"location":"analisis/#rnf-04-mantenibilidad","title":"RNF-04: Mantenibilidad","text":"<ul> <li>C\u00f3digo SQL documentado</li> <li>Nomenclatura consistente en espa\u00f1ol</li> <li>Dise\u00f1o normalizado hasta 3FN</li> </ul>"},{"location":"analisis/#proceso-de-normalizacion","title":"Proceso de Normalizaci\u00f3n","text":""},{"location":"analisis/#analisis-de-dependencias-funcionales","title":"An\u00e1lisis de Dependencias Funcionales","text":"<p>Partiendo de una tabla universal hipot\u00e9tica, se identifican las siguientes dependencias funcionales:</p> <pre><code>PEDIDO_UNIVERSAL (\n    Num_Pedido, Fecha, Hora, Num_Ventanilla, \n    Telefono_Contacto, Poblacion, Direccion_Entrega,\n    Num_Repartidor, Nombre_Repartidor, Apellidos_Repartidor, \n    DNI_Repartidor, Telefono_Repartidor, Matricula_Moto, Turno,\n    Cod_Producto, Nombre_Producto, Ingredientes, Precio_Producto,\n    Cantidad_Producto, Precio_Venta_Producto,\n    Cod_Menu, Nombre_Menu, Descripcion_Menu, Precio_Menu,\n    Cantidad_Menu, Precio_Venta_Menu\n)\n</code></pre> <p>Dependencias funcionales identificadas:</p> <ol> <li><code>Num_Pedido \u2192 Fecha, Hora</code></li> <li><code>Num_Pedido \u2192 Num_Ventanilla</code> (solo para pedidos de ventanilla)</li> <li><code>Num_Pedido \u2192 Telefono_Contacto, Poblacion, Direccion_Entrega, Num_Repartidor</code> (solo para domicilio)</li> <li><code>Num_Repartidor \u2192 Nombre_Repartidor, Apellidos_Repartidor, DNI_Repartidor, Telefono_Repartidor, Matricula_Moto, Turno</code></li> <li><code>DNI_Repartidor \u2192 Num_Repartidor</code> (clave alternativa)</li> <li><code>Cod_Producto \u2192 Nombre_Producto, Ingredientes, Precio_Producto</code></li> <li><code>Cod_Menu \u2192 Nombre_Menu, Descripcion_Menu, Precio_Menu</code></li> <li><code>(Num_Pedido, Cod_Producto) \u2192 Cantidad_Producto, Precio_Venta_Producto</code></li> <li><code>(Num_Pedido, Cod_Menu) \u2192 Cantidad_Menu, Precio_Venta_Menu</code></li> <li><code>(Cod_Menu, Cod_Producto) \u2192 Cantidad</code> (composici\u00f3n del men\u00fa)</li> </ol>"},{"location":"analisis/#primera-forma-normal-1fn","title":"Primera Forma Normal (1FN)","text":"<p>Definici\u00f3n: Una tabla est\u00e1 en 1FN si todos sus atributos contienen valores at\u00f3micos (no hay grupos repetitivos ni atributos multivaluados).</p> <p>Problema inicial: En la tabla universal, un pedido puede tener m\u00faltiples productos y m\u00faltiples men\u00fas, lo que genera grupos repetitivos.</p> <p>Soluci\u00f3n: Separar en tablas diferentes:</p> <pre><code>PEDIDO (Num_Pedido, Fecha, Hora, Tipo_Pedido)\nPEDIDO_VENTANILLA (Num_Pedido, Num_Ventanilla)\nPEDIDO_DOMICILIO (Num_Pedido, Telefono_Contacto, Poblacion, Direccion_Entrega, Num_Repartidor)\nREPARTIDOR (Num_Repartidor, Nombre, Apellidos, DNI, Telefono, Matricula_Moto, Turno)\nPRODUCTO (Cod_Producto, Nombre, Ingredientes, Precio)\nMENU (Cod_Menu, Nombre, Descripcion, Precio)\nDETALLE_PEDIDO_PRODUCTO (Num_Pedido, Cod_Producto, Cantidad, Precio_Venta)\nDETALLE_PEDIDO_MENU (Num_Pedido, Cod_Menu, Cantidad, Precio_Venta)\nCOMPOSICION_MENU (Cod_Menu, Cod_Producto, Cantidad)\n</code></pre> <p>Resultado: \u2705 Todos los atributos son at\u00f3micos.</p>"},{"location":"analisis/#segunda-forma-normal-2fn","title":"Segunda Forma Normal (2FN)","text":"<p>Definici\u00f3n: Una tabla est\u00e1 en 2FN si est\u00e1 en 1FN y todos los atributos no clave dependen completamente de la clave primaria (no hay dependencias parciales).</p> <p>An\u00e1lisis de tablas con claves compuestas:</p> Tabla Clave Primaria Dependencias \u00bfCumple 2FN? <code>DETALLE_PEDIDO_PRODUCTO</code> (Num_Pedido, Cod_Producto) Cantidad, Precio_Venta dependen de ambos \u2705 S\u00ed <code>DETALLE_PEDIDO_MENU</code> (Num_Pedido, Cod_Menu) Cantidad, Precio_Venta dependen de ambos \u2705 S\u00ed <code>COMPOSICION_MENU</code> (Cod_Menu, Cod_Producto) Cantidad depende de ambos \u2705 S\u00ed <p>Resultado: \u2705 No existen dependencias parciales. Todas las tablas est\u00e1n en 2FN.</p>"},{"location":"analisis/#tercera-forma-normal-3fn","title":"Tercera Forma Normal (3FN)","text":"<p>Definici\u00f3n: Una tabla est\u00e1 en 3FN si est\u00e1 en 2FN y no existen dependencias transitivas (ning\u00fan atributo no clave depende de otro atributo no clave).</p> <p>An\u00e1lisis de dependencias transitivas:</p> <p>En la tabla <code>PEDIDO_DOMICILIO</code> original podr\u00eda existir: - <code>Num_Pedido \u2192 Num_Repartidor</code> - <code>Num_Repartidor \u2192 Nombre, Apellidos, DNI, Telefono, Matricula, Turno</code></p> <p>Esto crear\u00eda una dependencia transitiva: <code>Num_Pedido \u2192 Num_Repartidor \u2192 Datos_Repartidor</code></p> <p>Soluci\u00f3n: Separar en dos tablas: <pre><code>PEDIDO_DOMICILIO (Num_Pedido, Telefono_Contacto, Poblacion, Direccion_Entrega, Num_Repartidor)\nREPARTIDOR (Num_Repartidor, Nombre, Apellidos, DNI, Telefono, Matricula_Moto, Turno)\n</code></pre></p> <p>Verificaci\u00f3n final:</p> Tabla Dependencias Transitivas \u00bfCumple 3FN? <code>PEDIDO</code> No existen \u2705 S\u00ed <code>PEDIDO_VENTANILLA</code> No existen \u2705 S\u00ed <code>PEDIDO_DOMICILIO</code> Eliminadas (Repartidor separado) \u2705 S\u00ed <code>REPARTIDOR</code> No existen \u2705 S\u00ed <code>PRODUCTO</code> No existen \u2705 S\u00ed <code>MENU</code> No existen \u2705 S\u00ed Tablas de detalle No existen \u2705 S\u00ed <p>Resultado: \u2705 El esquema completo est\u00e1 en Tercera Forma Normal (3FN).</p>"},{"location":"analisis/#decisiones-de-diseno-justificadas","title":"Decisiones de Dise\u00f1o Justificadas","text":""},{"location":"analisis/#1-especializacion-de-pedidos-mediante-extensiones-de-tabla","title":"1. Especializaci\u00f3n de Pedidos mediante Extensiones de Tabla","text":"<p>Decisi\u00f3n: Utilizar una tabla base <code>PEDIDO</code> con dos tablas de extensi\u00f3n (<code>PEDIDO_VENTANILLA</code> y <code>PEDIDO_DOMICILIO</code>) en lugar de una \u00fanica tabla con campos opcionales.</p> <p>Justificaci\u00f3n: - \u2705 Integridad: Evita valores NULL innecesarios - \u2705 Escalabilidad: Facilita agregar nuevos canales (app m\u00f3vil, t\u00f3tem) - \u2705 Claridad: Separa claramente las responsabilidades - \u2705 Normalizaci\u00f3n: Mantiene 3FN sin redundancia</p> <p>Alternativa descartada: Tabla \u00fanica con campos opcionales generar\u00eda m\u00faltiples NULL y violar\u00eda principios de dise\u00f1o limpio.</p>"},{"location":"analisis/#2-normalizacion-completa-de-ingredientes","title":"2. Normalizaci\u00f3n Completa de Ingredientes","text":"<p>Decisi\u00f3n: Crear tabla dedicada <code>INGREDIENTE</code> y tabla de relaci\u00f3n <code>PRODUCTO_INGREDIENTE</code> para normalizar completamente los ingredientes.</p> <p>Justificaci\u00f3n: - \u2705 Cumplimiento de 3FN: Elimina dependencias transitivas y grupos repetitivos - \u2705 Gesti\u00f3n de al\u00e9rgenos: Permite consultas eficientes por tipo de al\u00e9rgeno (gluten, lactosa, etc.) - \u2705 Eliminaci\u00f3n de redundancia: Cada ingrediente se almacena una sola vez - \u2705 Consistencia: UNIQUE en nombre evita duplicados - \u2705 Cumplimiento normativo: Facilita reportes precisos para normativas sanitarias - \u2705 Consultas potentes: Permite filtrar productos por ingredientes o al\u00e9rgenos</p> <p>Contexto: Seg\u00fan acta de la tercera reuni\u00f3n (21/01/2026), el Responsable de Calidad y la nutricionista plantearon la necesidad de mejorar la gesti\u00f3n de al\u00e9rgenos para cumplir con normativas sanitarias m\u00e1s estrictas. Se decidi\u00f3 cambiar el enfoque inicial (texto libre) por normalizaci\u00f3n completa.</p> <p>Implementaci\u00f3n: <pre><code>-- Tabla de ingredientes\nINGREDIENTE (Cod_Ingrediente, Nombre UNIQUE, Alergeno, Tipo_Alergeno)\n\n-- Relaci\u00f3n N:M con productos\nPRODUCTO_INGREDIENTE (Cod_Producto, Cod_Ingrediente)\n  PRIMARY KEY (Cod_Producto, Cod_Ingrediente)\n</code></pre></p> <p>Ventajas sobre texto libre: - Consultas como \"productos sin lactosa\" son simples JOINs en lugar de b\u00fasquedas de texto - Cambiar informaci\u00f3n de un ingrediente (ej: marcar como al\u00e9rgeno) afecta autom\u00e1ticamente a todos los productos - Permite estad\u00edsticas: ingredientes m\u00e1s usados, productos por al\u00e9rgeno, etc.</p>"},{"location":"analisis/#3-precio-de-venta-historico","title":"3. Precio de Venta Hist\u00f3rico","text":"<p>Decisi\u00f3n: Almacenar <code>Precio_Venta</code> en las tablas de detalle de pedido, adem\u00e1s del precio actual en <code>PRODUCTO</code> y <code>MENU</code>.</p> <p>Justificaci\u00f3n: - \u2705 Hist\u00f3rico: Permite consultar el precio exacto en el momento de la venta - \u2705 Auditor\u00eda: Esencial para contabilidad y an\u00e1lisis retrospectivo - \u2705 Promociones: Permite aplicar descuentos sin perder el precio de cat\u00e1logo</p>"},{"location":"analisis/#4-turno-como-enumeracion","title":"4. Turno como Enumeraci\u00f3n","text":"<p>Decisi\u00f3n: Utilizar restricci\u00f3n <code>CHECK</code> con valores ('M', 'T', 'N') en lugar de tabla de turnos.</p> <p>Justificaci\u00f3n: - \u2705 Estabilidad: Los turnos son valores fijos que no cambiar\u00e1n - \u2705 Rendimiento: Evita JOINs innecesarios - \u2705 Simplicidad: Reduce el n\u00famero de tablas</p>"},{"location":"analisis/#conclusiones-del-analisis","title":"Conclusiones del An\u00e1lisis","text":"<p>El dise\u00f1o resultante cumple con:</p> <ol> <li>\u2705 Tercera Forma Normal (3FN) en todas las tablas</li> <li>\u2705 Integridad referencial completa mediante claves for\u00e1neas</li> <li>\u2705 Escalabilidad para futuros canales de venta</li> <li>\u2705 Trazabilidad mediante numeraci\u00f3n correlativa \u00fanica</li> <li>\u2705 Flexibilidad para promociones y cambios de precio</li> <li>\u2705 Simplicidad en la gesti\u00f3n de ingredientes y turnos</li> </ol> <p>El modelo est\u00e1 preparado para soportar la operativa actual y futuras expansiones del negocio, manteniendo la integridad de los datos y facilitando la extracci\u00f3n de estad\u00edsticas de negocio.</p>"},{"location":"diseno-er/","title":"Dise\u00f1o Conceptual: El Modelo Entidad/Relaci\u00f3n","text":"<p>El Modelo Entidad/Relaci\u00f3n (E/R) constituye la abstracci\u00f3n de la realidad empresarial de Mc Ilerna Albor Croft. La elecci\u00f3n de las entidades y sus interrelaciones busca minimizar la redundancia mientras se maximiza la expresividad de los datos.</p> <p>Nota: El sistema cuenta con 11 tablas normalizadas a 3FN, incluyendo las nuevas tablas INGREDIENTE y PRODUCTO_INGREDIENTE para gesti\u00f3n de al\u00e9rgenos.</p>"},{"location":"diseno-er/#entidades-y-atributos-principales","title":"Entidades y Atributos Principales","text":"<p>Se han identificado entidades fuertes que sostienen la estructura y entidades de especializaci\u00f3n que aportan el detalle operativo:</p> <ul> <li>Pedido: N\u00facleo del sistema. Posee una clave primaria <code>Num_Pedido</code> correlativa. Sus atributos incluyen Fecha y Hora.</li> <li>Especializaciones de Pedido:<ul> <li>Pedido_Ventanilla: Incluye el atributo <code>Num_Ventanilla</code>.</li> <li>Pedido_Domicilio: Incluye <code>Telefono_Contacto</code>, <code>Poblacion</code> y <code>Direccion_Entrega</code>.</li> </ul> </li> <li>Repartidor: Contiene <code>Num_Repartidor</code> (PK), Nombre, Apellidos, DNI, Tel\u00e9fono, Matr\u00edcula de la moto y Turno (Ma\u00f1ana, Tarde, Noche).</li> <li>Ingrediente: Cat\u00e1logo de ingredientes con <code>Cod_Ingrediente</code> (PK), Nombre (UNIQUE), Alergeno (booleano) y Tipo_Alergeno (gluten, lactosa, etc.).</li> <li>Producto: Cat\u00e1logo individual con <code>Cod_Producto</code>, Nombre y Precio. Los ingredientes se gestionan mediante relaci\u00f3n N:M.</li> <li>Men\u00fa: Entidad comercial con <code>Cod_Menu</code>, Nombre, Descripci\u00f3n y Precio.</li> </ul> <p>A continuaci\u00f3n se presenta el dise\u00f1o conceptual del sistema</p> erDiagram     REPARTIDOR {         int Num_Repartidor PK \"Autoincremental\"         string Nombre \"NOT NULL\"         string Apellido1 \"NOT NULL\"         string Apellido2         string DNI UK \"Unique Key\"         string Telefono         string Matricula_Moto         string Turno \"CHECK (M, T, N)\"     }      INGREDIENTE {         int Cod_Ingrediente PK \"Autoincremental\"         string Nombre UK \"Unique Key\"         boolean Alergeno \"DEFAULT FALSE\"         string Tipo_Alergeno \"Gluten, Lactosa, etc.\"     }      PEDIDO {         int Num_Pedido PK \"Correlativo\"         date Fecha         time Hora     }      PRODUCTO {         int Cod_Producto PK         string Nombre         decimal Precio \"CHECK &gt; 0\"     }      MENU {         int Cod_Menu PK         string Nombre         string Descripcion         decimal Precio \"CHECK &gt; 0\"     }      %% ---------------------------------------------------------     %% ENTIDADES DE ESPECIALIZACI\u00d3N (JERARQU\u00cdA)     %% ---------------------------------------------------------      PEDIDO_VENTANILLA {         int Num_Pedido PK, FK         int Num_Ventanilla     }      PEDIDO_DOMICILIO {         int Num_Pedido PK, FK         string Telefono_Contacto         string Poblacion         string Direccion_Entrega         int Num_Repartidor FK     }      %% ---------------------------------------------------------     %% TABLAS INTERMEDIAS (RELACIONES N:M EXPL\u00cdCITAS)     %% ---------------------------------------------------------      %% Estas tablas existen f\u00edsicamente en el SQL para gestionar cantidades      PRODUCTO_INGREDIENTE {         int Cod_Producto PK, FK         int Cod_Ingrediente PK, FK     }      DETALLE_PEDIDO_PRODUCTO {         int Num_Pedido PK, FK         int Cod_Producto PK, FK         int Cantidad         decimal Precio_Venta     }      DETALLE_PEDIDO_MENU {         int Num_Pedido PK, FK         int Cod_Menu PK, FK         int Cantidad         decimal Precio_Venta     }      COMPOSICION_MENU {         int Cod_Menu PK, FK         int Cod_Producto PK, FK         int Cantidad     }      %% ---------------------------------------------------------     %% RELACIONES Y CARDINALIDADES     %% ---------------------------------------------------------      %% 1. Especializaci\u00f3n (Herencia)     PEDIDO ||--|| PEDIDO_VENTANILLA : \"es procesado en\"     PEDIDO ||--|| PEDIDO_DOMICILIO : \"es enviado a\"      %% 2. Relaci\u00f3n Repartidor - Pedido Domicilio (1:N)     REPARTIDOR ||--o{ PEDIDO_DOMICILIO : \"entrega\"      %% 3. Relaci\u00f3n Producto - Ingrediente (N:M)     PRODUCTO ||--|{ PRODUCTO_INGREDIENTE : \"contiene\"     INGREDIENTE ||--|{ PRODUCTO_INGREDIENTE : \"forma parte de\"      %% 4. Relaci\u00f3n Pedido - Producto (N:M resuelta con entidad d\u00e9bil)     PEDIDO ||--|{ DETALLE_PEDIDO_PRODUCTO : \"contiene\"     PRODUCTO ||--|{ DETALLE_PEDIDO_PRODUCTO : \"est\u00e1 en\"      %% 5. Relaci\u00f3n Pedido - Men\u00fa (N:M resuelta con entidad d\u00e9bil)     PEDIDO ||--|{ DETALLE_PEDIDO_MENU : \"contiene\"     MENU ||--|{ DETALLE_PEDIDO_MENU : \"est\u00e1 en\"      %% 6. Relaci\u00f3n Men\u00fa - Producto (N:M resuelta con entidad d\u00e9bil)     MENU ||--|{ COMPOSICION_MENU : \"se compone de\"     PRODUCTO ||--|{ COMPOSICION_MENU : \"forma parte de\""},{"location":"diseno-logico/","title":"Dise\u00f1o L\u00f3gico y Modelo Relacional","text":"<p>El dise\u00f1o l\u00f3gico transforma el modelo conceptual E/R en un esquema relacional implementable en SQL. Este cap\u00edtulo documenta el diccionario de datos completo, las restricciones de integridad y la arquitectura de especializaci\u00f3n utilizada para los pedidos.</p>"},{"location":"diseno-logico/#modelo-relacional-completo","title":"Modelo Relacional Completo","text":""},{"location":"diseno-logico/#esquema-de-tablas","title":"Esquema de Tablas","text":"<p>El sistema se compone de 11 tablas organizadas en cuatro categor\u00edas:</p> graph TD     A[Tablas Maestras] --&gt; B[REPARTIDOR]     A --&gt; C[INGREDIENTE]     A --&gt; D[PRODUCTO]     A --&gt; E[MENU]      F[Tablas de Pedidos] --&gt; G[PEDIDO]     F --&gt; H[PEDIDO_VENTANILLA]     F --&gt; I[PEDIDO_DOMICILIO]      J[Tablas de Relaci\u00f3n] --&gt; K[PRODUCTO_INGREDIENTE]     J --&gt; L[COMPOSICION_MENU]     J --&gt; M[DETALLE_PEDIDO_PRODUCTO]     J --&gt; N[DETALLE_PEDIDO_MENU]      G -.extensi\u00f3n.-&gt; H     G -.extensi\u00f3n.-&gt; I     I --&gt; B     K --&gt; D     K --&gt; C     L --&gt; E     L --&gt; D     M --&gt; G     M --&gt; D     N --&gt; G     N --&gt; E"},{"location":"diseno-logico/#diccionario-de-datos","title":"Diccionario de Datos","text":""},{"location":"diseno-logico/#tabla-repartidor","title":"Tabla: REPARTIDOR","text":"<p>Descripci\u00f3n: Almacena la informaci\u00f3n de los empleados repartidores que realizan entregas a domicilio.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Num_Repartidor</code> INT PK, AUTO_INCREMENT, NOT NULL Identificador \u00fanico del repartidor <code>Nombre</code> VARCHAR(50) NOT NULL Nombre del repartidor <code>Apellido1</code> VARCHAR(50) NOT NULL Primer apellido <code>Apellido2</code> VARCHAR(50) NULL Segundo apellido (opcional) <code>DNI</code> VARCHAR(9) UNIQUE, NOT NULL Documento de identidad (clave alternativa) <code>Telefono</code> VARCHAR(15) NULL Tel\u00e9fono de contacto <code>Matricula_Moto</code> VARCHAR(10) NULL Matr\u00edcula del veh\u00edculo asignado <code>Turno</code> CHAR(1) CHECK IN ('M','T','N'), NOT NULL Turno: Ma\u00f1ana, Tarde, Noche <p>Claves: - Primaria: <code>Num_Repartidor</code> - Alternativa: <code>DNI</code> (UNIQUE)</p> <p>Restricciones: - <code>CHECK (Turno IN ('M', 'T', 'N'))</code> - Solo permite valores v\u00e1lidos de turno</p>"},{"location":"diseno-logico/#tabla-ingrediente","title":"Tabla: INGREDIENTE","text":"<p>Descripci\u00f3n: Cat\u00e1logo de ingredientes con informaci\u00f3n de al\u00e9rgenos para gesti\u00f3n sanitaria.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Cod_Ingrediente</code> INT PK, AUTO_INCREMENT, NOT NULL Identificador \u00fanico del ingrediente <code>Nombre</code> VARCHAR(100) UNIQUE, NOT NULL Nombre del ingrediente (clave alternativa) <code>Alergeno</code> BOOLEAN NOT NULL, DEFAULT FALSE Indica si es un al\u00e9rgeno <code>Tipo_Alergeno</code> VARCHAR(50) NULL Tipo de al\u00e9rgeno (Gluten, Lactosa, Frutos secos, etc.) <p>Claves: - Primaria: <code>Cod_Ingrediente</code> - Alternativa: <code>Nombre</code> (UNIQUE)</p> <p>Restricciones: - <code>UNIQUE (Nombre)</code> - Evita duplicados de ingredientes - <code>DEFAULT FALSE</code> en <code>Alergeno</code> - Por defecto no es al\u00e9rgeno</p>"},{"location":"diseno-logico/#tabla-producto","title":"Tabla: PRODUCTO","text":"<p>Descripci\u00f3n: Cat\u00e1logo de productos individuales disponibles para la venta. Los ingredientes se gestionan mediante la tabla de relaci\u00f3n PRODUCTO_INGREDIENTE.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Cod_Producto</code> INT PK, AUTO_INCREMENT, NOT NULL C\u00f3digo \u00fanico del producto <code>Nombre</code> VARCHAR(100) NOT NULL Nombre comercial del producto <code>Precio</code> DECIMAL(6,2) CHECK &gt; 0, NOT NULL Precio unitario actual <p>Claves: - Primaria: <code>Cod_Producto</code></p> <p>Restricciones: - <code>CHECK (Precio &gt; 0)</code> - El precio debe ser positivo</p> <p>Nota: El campo <code>Ingredientes</code> fue eliminado. Ahora se gestiona mediante normalizaci\u00f3n completa con las tablas INGREDIENTE y PRODUCTO_INGREDIENTE</p>"},{"location":"diseno-logico/#tabla-menu","title":"Tabla: MENU","text":"<p>Descripci\u00f3n: Agrupaciones comerciales de productos con precio promocional.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Cod_Menu</code> INT PK, AUTO_INCREMENT, NOT NULL C\u00f3digo \u00fanico del men\u00fa <code>Nombre</code> VARCHAR(100) NOT NULL Nombre comercial del men\u00fa <code>Descripcion</code> TEXT NULL Descripci\u00f3n detallada de la oferta <code>Precio</code> DECIMAL(6,2) CHECK &gt; 0, NOT NULL Precio del men\u00fa completo <p>Claves: - Primaria: <code>Cod_Menu</code></p> <p>Restricciones: - <code>CHECK (Precio &gt; 0)</code> - El precio debe ser positivo</p>"},{"location":"diseno-logico/#tabla-pedido","title":"Tabla: PEDIDO","text":"<p>Descripci\u00f3n: Tabla base que registra todos los pedidos con numeraci\u00f3n correlativa \u00fanica.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Num_Pedido</code> INT PK, AUTO_INCREMENT, NOT NULL N\u00famero correlativo \u00fanico de pedido <code>Fecha</code> DATE NOT NULL Fecha del pedido <code>Hora</code> TIME NOT NULL Hora del pedido <p>Claves: - Primaria: <code>Num_Pedido</code></p> <p>Notas: - Esta tabla es la entidad base de la jerarqu\u00eda de especializaci\u00f3n - Cada registro debe tener exactamente una extensi\u00f3n (ventanilla o domicilio)</p>"},{"location":"diseno-logico/#tabla-pedido_ventanilla","title":"Tabla: PEDIDO_VENTANILLA","text":"<p>Descripci\u00f3n: Extensi\u00f3n de PEDIDO para pedidos realizados en ventanilla.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Num_Pedido</code> INT PK, FK \u2192 PEDIDO, NOT NULL Referencia al pedido base <code>Num_Ventanilla</code> INT NOT NULL N\u00famero de ventanilla donde se atendi\u00f3 <p>Claves: - Primaria: <code>Num_Pedido</code> - For\u00e1nea: <code>Num_Pedido</code> \u2192 <code>PEDIDO(Num_Pedido)</code> ON DELETE CASCADE</p> <p>Cardinalidad: 1:1 con PEDIDO (extensi\u00f3n)</p>"},{"location":"diseno-logico/#tabla-pedido_domicilio","title":"Tabla: PEDIDO_DOMICILIO","text":"<p>Descripci\u00f3n: Extensi\u00f3n de PEDIDO para pedidos con entrega a domicilio.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Num_Pedido</code> INT PK, FK \u2192 PEDIDO, NOT NULL Referencia al pedido base <code>Telefono_Contacto</code> VARCHAR(15) NOT NULL Tel\u00e9fono del cliente <code>Poblacion</code> VARCHAR(100) NOT NULL Poblaci\u00f3n de entrega <code>Direccion_Entrega</code> VARCHAR(200) NOT NULL Direcci\u00f3n completa de entrega <code>Num_Repartidor</code> INT FK \u2192 REPARTIDOR, NOT NULL Repartidor asignado <p>Claves: - Primaria: <code>Num_Pedido</code> - For\u00e1neas:    - <code>Num_Pedido</code> \u2192 <code>PEDIDO(Num_Pedido)</code> ON DELETE CASCADE   - <code>Num_Repartidor</code> \u2192 <code>REPARTIDOR(Num_Repartidor)</code></p> <p>Cardinalidad:  - 1:1 con PEDIDO (extensi\u00f3n) - N:1 con REPARTIDOR (un repartidor puede entregar m\u00faltiples pedidos)</p>"},{"location":"diseno-logico/#tabla-producto_ingrediente","title":"Tabla: PRODUCTO_INGREDIENTE","text":"<p>Descripci\u00f3n: Tabla de relaci\u00f3n N:M que define qu\u00e9 ingredientes componen cada producto.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Cod_Producto</code> INT PK, FK \u2192 PRODUCTO, NOT NULL C\u00f3digo del producto <code>Cod_Ingrediente</code> INT PK, FK \u2192 INGREDIENTE, NOT NULL C\u00f3digo del ingrediente <p>Claves: - Primaria Compuesta: (<code>Cod_Producto</code>, <code>Cod_Ingrediente</code>) - For\u00e1neas:   - <code>Cod_Producto</code> \u2192 <code>PRODUCTO(Cod_Producto)</code> ON DELETE CASCADE   - <code>Cod_Ingrediente</code> \u2192 <code>INGREDIENTE(Cod_Ingrediente)</code> ON DELETE RESTRICT</p> <p>Cardinalidad: - N:M entre PRODUCTO e INGREDIENTE - Un producto puede tener m\u00faltiples ingredientes - Un ingrediente puede estar en m\u00faltiples productos</p> <p>Ejemplo: Hamburguesa Simple contiene: Pan, Carne, Lechuga, Tomate</p>"},{"location":"diseno-logico/#tabla-composicion_menu","title":"Tabla: COMPOSICION_MENU","text":"<p>Descripci\u00f3n: Tabla de relaci\u00f3n N:M que define qu\u00e9 productos componen cada men\u00fa.</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Cod_Menu</code> INT PK, FK \u2192 MENU, NOT NULL C\u00f3digo del men\u00fa <code>Cod_Producto</code> INT PK, FK \u2192 PRODUCTO, NOT NULL C\u00f3digo del producto <code>Cantidad</code> INT CHECK &gt; 0, NOT NULL Unidades del producto en el men\u00fa <p>Claves: - Primaria: (<code>Cod_Menu</code>, <code>Cod_Producto</code>) - For\u00e1neas:   - <code>Cod_Menu</code> \u2192 <code>MENU(Cod_Menu)</code> ON DELETE CASCADE   - <code>Cod_Producto</code> \u2192 <code>PRODUCTO(Cod_Producto)</code></p> <p>Restricciones: - <code>CHECK (Cantidad &gt; 0)</code> - La cantidad debe ser positiva</p> <p>Ejemplo: El Men\u00fa Ahorro puede contener 1 Hamburguesa + 1 Bebida + 1 Patatas</p>"},{"location":"diseno-logico/#tabla-detalle_pedido_producto","title":"Tabla: DETALLE_PEDIDO_PRODUCTO","text":"<p>Descripci\u00f3n: L\u00edneas de pedido para productos individuales (relaci\u00f3n N:M entre PEDIDO y PRODUCTO).</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Num_Pedido</code> INT PK, FK \u2192 PEDIDO, NOT NULL N\u00famero de pedido <code>Cod_Producto</code> INT PK, FK \u2192 PRODUCTO, NOT NULL C\u00f3digo del producto <code>Cantidad</code> INT CHECK &gt; 0, NOT NULL Unidades solicitadas <code>Precio_Venta</code> DECIMAL(6,2) CHECK &gt; 0, NOT NULL Precio unitario en el momento de la venta <p>Claves: - Primaria: (<code>Num_Pedido</code>, <code>Cod_Producto</code>) - For\u00e1neas:   - <code>Num_Pedido</code> \u2192 <code>PEDIDO(Num_Pedido)</code> ON DELETE CASCADE   - <code>Cod_Producto</code> \u2192 <code>PRODUCTO(Cod_Producto)</code></p> <p>Restricciones: - <code>CHECK (Cantidad &gt; 0)</code> - <code>CHECK (Precio_Venta &gt; 0)</code></p> <p>Nota: <code>Precio_Venta</code> permite mantener hist\u00f3rico de precios y aplicar descuentos sin modificar el cat\u00e1logo.</p>"},{"location":"diseno-logico/#tabla-detalle_pedido_menu","title":"Tabla: DETALLE_PEDIDO_MENU","text":"<p>Descripci\u00f3n: L\u00edneas de pedido para men\u00fas (relaci\u00f3n N:M entre PEDIDO y MENU).</p> Columna Tipo de Dato Restricciones Descripci\u00f3n <code>Num_Pedido</code> INT PK, FK \u2192 PEDIDO, NOT NULL N\u00famero de pedido <code>Cod_Menu</code> INT PK, FK \u2192 MENU, NOT NULL C\u00f3digo del men\u00fa <code>Cantidad</code> INT CHECK &gt; 0, NOT NULL Unidades solicitadas <code>Precio_Venta</code> DECIMAL(6,2) CHECK &gt; 0, NOT NULL Precio del men\u00fa en el momento de la venta <p>Claves: - Primaria: (<code>Num_Pedido</code>, <code>Cod_Menu</code>) - For\u00e1neas:   - <code>Num_Pedido</code> \u2192 <code>PEDIDO(Num_Pedido)</code> ON DELETE CASCADE   - <code>Cod_Menu</code> \u2192 <code>MENU(Cod_Menu)</code></p> <p>Restricciones: - <code>CHECK (Cantidad &gt; 0)</code> - <code>CHECK (Precio_Venta &gt; 0)</code></p>"},{"location":"diseno-logico/#arquitectura-de-especializacion-extensiones-de-tabla","title":"Arquitectura de Especializaci\u00f3n: Extensiones de Tabla","text":""},{"location":"diseno-logico/#concepto","title":"Concepto","text":"<p>La jerarqu\u00eda de pedidos se implementa mediante el patr\u00f3n Table Extension (Extensi\u00f3n de Tabla), donde:</p> <ol> <li>Tabla Base: <code>PEDIDO</code> contiene atributos comunes a todos los pedidos</li> <li>Tablas de Extensi\u00f3n: <code>PEDIDO_VENTANILLA</code> y <code>PEDIDO_DOMICILIO</code> contienen atributos espec\u00edficos</li> </ol>"},{"location":"diseno-logico/#caracteristicas","title":"Caracter\u00edsticas","text":"erDiagram     PEDIDO ||--|| PEDIDO_VENTANILLA : \"extiende (1:1)\"     PEDIDO ||--|| PEDIDO_DOMICILIO : \"extiende (1:1)\"      PEDIDO {         int Num_Pedido PK         date Fecha         time Hora     }      PEDIDO_VENTANILLA {         int Num_Pedido PK_FK         int Num_Ventanilla     }      PEDIDO_DOMICILIO {         int Num_Pedido PK_FK         string Telefono_Contacto         string Poblacion         string Direccion_Entrega         int Num_Repartidor FK     }  <p>Ventajas: - \u2705 Integridad: <code>ON DELETE CASCADE</code> garantiza que al eliminar un pedido base se eliminan sus extensiones - \u2705 Eficiencia: No hay campos NULL innecesarios - \u2705 Escalabilidad: F\u00e1cil agregar nuevos tipos de pedido (app m\u00f3vil, t\u00f3tem) - \u2705 Consultas: Se puede consultar <code>PEDIDO</code> para estad\u00edsticas generales o hacer JOIN para detalles espec\u00edficos</p> <p>Consulta de ejemplo: <pre><code>-- Todos los pedidos con su tipo\nSELECT p.Num_Pedido, p.Fecha, p.Hora,\n       CASE \n           WHEN pv.Num_Pedido IS NOT NULL THEN 'Ventanilla'\n           WHEN pd.Num_Pedido IS NOT NULL THEN 'Domicilio'\n       END AS Tipo_Pedido\nFROM PEDIDO p\nLEFT JOIN PEDIDO_VENTANILLA pv ON p.Num_Pedido = pv.Num_Pedido\nLEFT JOIN PEDIDO_DOMICILIO pd ON p.Num_Pedido = pd.Num_Pedido;\n</code></pre></p>"},{"location":"diseno-logico/#diagrama-de-dependencias-completo","title":"Diagrama de Dependencias Completo","text":"graph LR     PEDIDO --&gt; PEDIDO_VENTANILLA     PEDIDO --&gt; PEDIDO_DOMICILIO     PEDIDO_DOMICILIO --&gt; REPARTIDOR      PEDIDO --&gt; DETALLE_PEDIDO_PRODUCTO     PEDIDO --&gt; DETALLE_PEDIDO_MENU      PRODUCTO --&gt; DETALLE_PEDIDO_PRODUCTO     PRODUCTO --&gt; COMPOSICION_MENU      MENU --&gt; DETALLE_PEDIDO_MENU     MENU --&gt; COMPOSICION_MENU      style PEDIDO fill:#ff6b6b     style REPARTIDOR fill:#4ecdc4     style PRODUCTO fill:#95e1d3     style MENU fill:#95e1d3  <p>Leyenda: - \ud83d\udd34 Tabla base de jerarqu\u00eda - \ud83d\udd35 Tablas maestras - \ud83d\udfe2 Tablas de cat\u00e1logo</p>"},{"location":"diseno-logico/#restricciones-de-integridad-resumen","title":"Restricciones de Integridad Resumen","text":""},{"location":"diseno-logico/#integridad-de-entidad","title":"Integridad de Entidad","text":"<ul> <li>Todas las tablas tienen clave primaria definida</li> <li>Uso de AUTO_INCREMENT para claves surrogadas</li> <li>NOT NULL en todas las claves primarias</li> </ul>"},{"location":"diseno-logico/#integridad-referencial","title":"Integridad Referencial","text":"<ul> <li>9 relaciones de clave for\u00e1nea implementadas</li> <li>ON DELETE CASCADE en extensiones de pedido y tablas de detalle</li> <li>ON DELETE RESTRICT (por defecto) en referencias a cat\u00e1logos</li> </ul>"},{"location":"diseno-logico/#integridad-de-dominio","title":"Integridad de Dominio","text":"<ul> <li>CHECK (Precio &gt; 0) en productos y men\u00fas</li> <li>CHECK (Cantidad &gt; 0) en todas las tablas de detalle</li> <li>CHECK (Turno IN ('M','T','N')) en repartidores</li> <li>UNIQUE (DNI) en repartidores</li> </ul>"},{"location":"diseno-logico/#integridad-semantica","title":"Integridad Sem\u00e1ntica","text":"<ul> <li>Un pedido debe ser exactamente de ventanilla o de domicilio (no ambos, no ninguno)</li> <li>Esta restricci\u00f3n se implementa a nivel de aplicaci\u00f3n o mediante triggers</li> </ul>"},{"location":"diseno-logico/#configuracion-tecnica","title":"Configuraci\u00f3n T\u00e9cnica","text":""},{"location":"diseno-logico/#motor-de-almacenamiento","title":"Motor de Almacenamiento","text":"<p><pre><code>ENGINE = InnoDB\n</code></pre> Justificaci\u00f3n: Soporte completo para transacciones ACID y claves for\u00e1neas.</p>"},{"location":"diseno-logico/#conjunto-de-caracteres","title":"Conjunto de Caracteres","text":"<p><pre><code>DEFAULT CHARSET = utf8mb4 COLLATE = utf8mb4_unicode_ci\n</code></pre> Justificaci\u00f3n: Soporte completo para caracteres Unicode (incluyendo emojis) y ordenaci\u00f3n correcta en espa\u00f1ol.</p>"},{"location":"diseno-logico/#indices-recomendados","title":"\u00cdndices Recomendados","text":"<p>Adem\u00e1s de los \u00edndices autom\u00e1ticos en claves primarias y for\u00e1neas:</p> <pre><code>-- Optimizaci\u00f3n para consultas por fecha\nCREATE INDEX idx_pedido_fecha ON PEDIDO(Fecha);\n\n-- Optimizaci\u00f3n para consultas por repartidor\nCREATE INDEX idx_pedido_domicilio_repartidor ON PEDIDO_DOMICILIO(Num_Repartidor);\n\n-- Optimizaci\u00f3n para b\u00fasqueda de productos\nCREATE INDEX idx_producto_nombre ON PRODUCTO(Nombre);\n</code></pre>"},{"location":"diseno-logico/#conclusiones-del-diseno-logico","title":"Conclusiones del Dise\u00f1o L\u00f3gico","text":"<p>El modelo relacional resultante:</p> <ol> <li>\u2705 Cumple con la Tercera Forma Normal (3FN)</li> <li>\u2705 Implementa 9 tablas con responsabilidades claras</li> <li>\u2705 Utiliza extensiones de tabla para jerarqu\u00eda de pedidos</li> <li>\u2705 Garantiza integridad referencial completa</li> <li>\u2705 Permite escalabilidad para nuevos canales</li> <li>\u2705 Facilita consultas estad\u00edsticas y auditor\u00eda</li> <li>\u2705 Optimizado para rendimiento con InnoDB</li> </ol> <p>El dise\u00f1o est\u00e1 listo para su implementaci\u00f3n en MySQL/MariaDB.</p>"},{"location":"requerimientos/","title":"Marco Estrat\u00e9gico y Fase de Requerimientos","text":"<p>La fase inicial de cualquier proyecto de base de datos requiere una comprensi\u00f3n profunda del dominio del problema. En Mc Ilerna Albor Croft, el sistema debe diferenciar claramente entre la operativa de ventanilla y la de entrega a domicilio, manteniendo una numeraci\u00f3n correlativa \u00fanica.</p>"},{"location":"requerimientos/#simulacion-de-intervenciones-con-el-cliente","title":"Simulaci\u00f3n de Intervenciones con el Cliente","text":""},{"location":"requerimientos/#acta-de-la-primera-reunion-definicion-de-alcance-operativo","title":"Acta de la Primera Reuni\u00f3n: Definici\u00f3n de Alcance Operativo","text":"Dato Detalle Fecha y Hora 12 de enero de 2026, 09:00h - 11:30h Lugar Instalaciones Albor Croft, Jerez de la Frontera Asistentes Juan Sevillano (Consultor), Gerencia Mc Ilerna, Responsable Log\u00edstica <p>Desarrollo: En esta sesi\u00f3n se desgran\u00f3 la naturaleza de los pedidos. La gerencia enfatiz\u00f3 que el sistema debe estar preparado para futuras expansiones (apps m\u00f3viles, t\u00f3tems). Se acord\u00f3 utilizar una entidad general para los pedidos con especializaci\u00f3n para capturar datos espec\u00edficos (ventanilla o direcci\u00f3n). Se defini\u00f3 que los turnos de trabajo ser\u00edan: Ma\u00f1ana, Tarde y Noche.</p>"},{"location":"requerimientos/#acta-de-la-segunda-reunion-estructura-de-productos-y-menus","title":"Acta de la Segunda Reuni\u00f3n: Estructura de Productos y Men\u00fas","text":"Dato Detalle Fecha y Hora 15 de enero de 2026, 10:00h - 13:00h Lugar Oficina T\u00e9cnica de Proyectos ASIR Asistentes Juan Sevillano (Consultor), Jefe de Cocina, Supervisor de Ventas <p>Desarrollo: Se clarific\u00f3 la relaci\u00f3n entre productos y men\u00fas. Un men\u00fa es una entidad comercial con precio y descripci\u00f3n propios, compuesta por productos que tambi\u00e9n se venden por separado. En esta reuni\u00f3n se discuti\u00f3 inicialmente almacenar los ingredientes como texto descriptivo para simplicidad operativa, priorizando la facilidad de gesti\u00f3n de al\u00e9rgenos.</p>"},{"location":"requerimientos/#acta-de-la-tercera-reunion-normalizacion-de-ingredientes","title":"Acta de la Tercera Reuni\u00f3n: Normalizaci\u00f3n de Ingredientes","text":"Dato Detalle Fecha y Hora 21 de enero de 2026, 14:00h - 16:30h Lugar Sala de Reuniones Virtual (Microsoft Teams) Asistentes Juan Sevillano (Consultor), Responsable de Calidad, Nutricionista, Jefe de Cocina <p>Desarrollo: Tras una revisi\u00f3n del dise\u00f1o inicial, el Responsable de Calidad plante\u00f3 la necesidad de mejorar la gesti\u00f3n de al\u00e9rgenos para cumplir con normativas sanitarias m\u00e1s estrictas. La nutricionista destac\u00f3 la importancia de poder generar reportes precisos sobre ingredientes y al\u00e9rgenos. Se decidi\u00f3 normalizar completamente los ingredientes creando una tabla dedicada <code>INGREDIENTE</code> con informaci\u00f3n detallada de al\u00e9rgenos (tipo: gluten, lactosa, frutos secos, etc.) y una tabla de relaci\u00f3n <code>PRODUCTO_INGREDIENTE</code> para vincular productos con sus ingredientes.</p> <p>Acuerdos alcanzados: - Crear tabla <code>INGREDIENTE</code> con campos: c\u00f3digo, nombre (\u00fanico), indicador de al\u00e9rgeno, y tipo de al\u00e9rgeno - Crear tabla de relaci\u00f3n N:M <code>PRODUCTO_INGREDIENTE</code> para vincular productos con ingredientes - Eliminar campo de texto libre <code>Ingredientes</code> de la tabla <code>PRODUCTO</code> - Sistema pasar\u00e1 de 9 a 11 tablas para cumplir estrictamente con 3FN - Beneficios: mejor gesti\u00f3n de al\u00e9rgenos, consultas m\u00e1s eficientes, eliminaci\u00f3n de redundancia</p> <p>Justificaci\u00f3n t\u00e9cnica: El cambio de decisi\u00f3n se fundamenta en el cumplimiento estricto de la Tercera Forma Normal (3FN), eliminando dependencias transitivas y grupos repetitivos. Aunque aumenta la complejidad de consultas (requiere JOINs), mejora significativamente la integridad de datos y facilita el cumplimiento normativo en gesti\u00f3n de al\u00e9rgenos.</p>"},{"location":"seguridad/","title":"Seguridad, Privacidad y Optimizaci\u00f3n","text":"<p>Este cap\u00edtulo documenta las medidas de seguridad, estrategias de backup, cumplimiento normativo y recomendaciones de optimizaci\u00f3n para el sistema de base de datos de Mc Ilerna Albor Croft.</p>"},{"location":"seguridad/#estrategia-de-backups","title":"Estrategia de Backups","text":""},{"location":"seguridad/#politica-de-respaldo","title":"Pol\u00edtica de Respaldo","text":"<p>El sistema implementa una estrategia de backups h\u00edbrida que combina respaldos completos e incrementales:</p> Tipo de Backup Frecuencia Retenci\u00f3n Ventana de Ejecuci\u00f3n Completo Diario 30 d\u00edas 02:00 - 04:00 (madrugada) Incremental Cada hora 7 d\u00edas Cada hora en punto Transaccional Continuo 24 horas Logs binarios en tiempo real"},{"location":"seguridad/#implementacion-tecnica","title":"Implementaci\u00f3n T\u00e9cnica","text":""},{"location":"seguridad/#backup-completo-diario","title":"Backup Completo Diario","text":"<pre><code>#!/bin/bash\n# Script: backup_completo.sh\n# Descripci\u00f3n: Backup completo de la base de datos\n\nFECHA=$(date +%Y%m%d_%H%M%S)\nBACKUP_DIR=\"/var/backups/mcilerna\"\nDB_NAME=\"McIlerna_Albor_Croft\"\n\nmysqldump --single-transaction \\\n          --routines \\\n          --triggers \\\n          --events \\\n          --user=backup_user \\\n          --password=$MYSQL_BACKUP_PASS \\\n          $DB_NAME | gzip &gt; $BACKUP_DIR/full_${FECHA}.sql.gz\n\n# Eliminar backups completos con m\u00e1s de 30 d\u00edas\nfind $BACKUP_DIR -name \"full_*.sql.gz\" -mtime +30 -delete\n</code></pre>"},{"location":"seguridad/#backup-incremental-horario","title":"Backup Incremental Horario","text":"<pre><code>#!/bin/bash\n# Script: backup_incremental.sh\n# Descripci\u00f3n: Backup incremental basado en binlogs\n\nFECHA=$(date +%Y%m%d_%H%M%S)\nBACKUP_DIR=\"/var/backups/mcilerna/incremental\"\n\nmysqlbinlog --read-from-remote-server \\\n            --raw \\\n            --stop-never \\\n            --result-file=$BACKUP_DIR/binlog_${FECHA} \\\n            mysql-bin.000001\n\n# Eliminar incrementales con m\u00e1s de 7 d\u00edas\nfind $BACKUP_DIR -name \"binlog_*\" -mtime +7 -delete\n</code></pre>"},{"location":"seguridad/#configuracion-de-mysql-para-backups","title":"Configuraci\u00f3n de MySQL para Backups","text":"<pre><code>-- Habilitar logs binarios en my.cnf\n[mysqld]\nlog-bin=mysql-bin\nbinlog_format=ROW\nexpire_logs_days=7\nsync_binlog=1\n</code></pre>"},{"location":"seguridad/#procedimiento-de-restauracion","title":"Procedimiento de Restauraci\u00f3n","text":""},{"location":"seguridad/#restauracion-completa","title":"Restauraci\u00f3n Completa","text":"<pre><code># 1. Restaurar backup completo\ngunzip &lt; /var/backups/mcilerna/full_20260113_020000.sql.gz | \\\nmysql -u root -p McIlerna_Albor_Croft\n\n# 2. Aplicar logs binarios incrementales (si es necesario)\nmysqlbinlog /var/backups/mcilerna/incremental/binlog_* | \\\nmysql -u root -p McIlerna_Albor_Croft\n</code></pre>"},{"location":"seguridad/#restauracion-a-punto-en-el-tiempo","title":"Restauraci\u00f3n a Punto en el Tiempo","text":"<pre><code># Restaurar hasta una hora espec\u00edfica\nmysqlbinlog --stop-datetime=\"2026-01-13 18:30:00\" \\\n            /var/backups/mcilerna/incremental/binlog_* | \\\nmysql -u root -p McIlerna_Albor_Croft\n</code></pre>"},{"location":"seguridad/#cumplimiento-rgpd","title":"Cumplimiento RGPD","text":""},{"location":"seguridad/#datos-personales-identificados","title":"Datos Personales Identificados","text":"<p>El sistema almacena datos personales sujetos al Reglamento General de Protecci\u00f3n de Datos (RGPD):</p> Tabla Datos Personales Categor\u00eda RGPD <code>REPARTIDOR</code> Nombre, Apellidos, DNI, Tel\u00e9fono Datos de empleados <code>PEDIDO_DOMICILIO</code> Tel\u00e9fono, Direcci\u00f3n Datos de clientes"},{"location":"seguridad/#medidas-de-cumplimiento","title":"Medidas de Cumplimiento","text":""},{"location":"seguridad/#1-minimizacion-de-datos","title":"1. Minimizaci\u00f3n de Datos","text":"<p>Art\u00edculo 5.1.c RGPD: Los datos deben ser adecuados, pertinentes y limitados.</p> <p>\u2705 Implementado: - Solo se almacenan datos estrictamente necesarios para la operativa - No se solicita email, nombre completo del cliente ni datos bancarios - Los ingredientes se usan solo para informaci\u00f3n de al\u00e9rgenos</p>"},{"location":"seguridad/#2-derecho-al-olvido","title":"2. Derecho al Olvido","text":"<p>Art\u00edculo 17 RGPD: Derecho de supresi\u00f3n.</p> <p>Procedimiento implementado: <pre><code>-- Anonimizar datos de cliente en pedidos antiguos (&gt; 2 a\u00f1os)\nUPDATE PEDIDO_DOMICILIO \nSET Telefono_Contacto = 'ANONIMIZADO',\n    Direccion_Entrega = 'ANONIMIZADO',\n    Poblacion = 'ANONIMIZADO'\nWHERE Num_Pedido IN (\n    SELECT Num_Pedido FROM PEDIDO \n    WHERE Fecha &lt; DATE_SUB(CURDATE(), INTERVAL 2 YEAR)\n);\n\n-- Eliminar repartidores que ya no trabajan (tras periodo legal)\nDELETE FROM REPARTIDOR \nWHERE Num_Repartidor NOT IN (\n    SELECT DISTINCT Num_Repartidor FROM PEDIDO_DOMICILIO\n    WHERE Num_Pedido IN (\n        SELECT Num_Pedido FROM PEDIDO \n        WHERE Fecha &gt; DATE_SUB(CURDATE(), INTERVAL 1 YEAR)\n    )\n);\n</code></pre></p>"},{"location":"seguridad/#3-seguridad-de-los-datos","title":"3. Seguridad de los Datos","text":"<p>Art\u00edculo 32 RGPD: Seguridad del tratamiento.</p> <p>Medidas t\u00e9cnicas: - \u2705 Cifrado de conexiones: <code>REQUIRE SSL</code> para usuarios remotos - \u2705 Cifrado en reposo: Tablespaces cifrados con <code>ENCRYPTION='Y'</code> - \u2705 Control de acceso: Principio de m\u00ednimo privilegio - \u2705 Auditor\u00eda: Logs de acceso a datos personales</p> <pre><code>-- Habilitar cifrado de tablespace\nALTER TABLE REPARTIDOR ENCRYPTION='Y';\nALTER TABLE PEDIDO_DOMICILIO ENCRYPTION='Y';\n\n-- Crear usuario con acceso restringido\nCREATE USER 'app_mcilerna'@'localhost' \nIDENTIFIED BY 'password_seguro' \nREQUIRE SSL;\n\nGRANT SELECT, INSERT, UPDATE ON McIlerna_Albor_Croft.PEDIDO TO 'app_mcilerna'@'localhost';\nGRANT SELECT, INSERT, UPDATE ON McIlerna_Albor_Croft.PEDIDO_VENTANILLA TO 'app_mcilerna'@'localhost';\nGRANT SELECT, INSERT, UPDATE ON McIlerna_Albor_Croft.PEDIDO_DOMICILIO TO 'app_mcilerna'@'localhost';\n-- No se otorga DELETE para prevenir borrados accidentales\n</code></pre>"},{"location":"seguridad/#4-registro-de-actividades","title":"4. Registro de Actividades","text":"<p>Art\u00edculo 30 RGPD: Registro de actividades de tratamiento.</p> <p>Tabla de auditor\u00eda: <pre><code>CREATE TABLE AUDITORIA_ACCESO (\n    Id_Auditoria INT AUTO_INCREMENT PRIMARY KEY,\n    Usuario VARCHAR(50) NOT NULL,\n    Tabla_Accedida VARCHAR(50) NOT NULL,\n    Tipo_Operacion ENUM('SELECT', 'INSERT', 'UPDATE', 'DELETE') NOT NULL,\n    Fecha_Hora TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    IP_Origen VARCHAR(45),\n    Registros_Afectados INT,\n    INDEX idx_fecha (Fecha_Hora),\n    INDEX idx_usuario (Usuario)\n) ENGINE=InnoDB;\n\n-- Trigger de ejemplo para auditar accesos a REPARTIDOR\nDELIMITER $$\nCREATE TRIGGER audit_repartidor_update\nAFTER UPDATE ON REPARTIDOR\nFOR EACH ROW\nBEGIN\n    INSERT INTO AUDITORIA_ACCESO (Usuario, Tabla_Accedida, Tipo_Operacion, Registros_Afectados)\n    VALUES (USER(), 'REPARTIDOR', 'UPDATE', 1);\nEND$$\nDELIMITER ;\n</code></pre></p>"},{"location":"seguridad/#gestion-de-usuarios-y-permisos","title":"Gesti\u00f3n de Usuarios y Permisos","text":""},{"location":"seguridad/#principio-de-minimo-privilegio","title":"Principio de M\u00ednimo Privilegio","text":"<p>Se definen 4 roles con permisos espec\u00edficos:</p>"},{"location":"seguridad/#1-administrador-de-base-de-datos","title":"1. Administrador de Base de Datos","text":"<pre><code>CREATE USER 'dba_mcilerna'@'localhost' IDENTIFIED BY 'password_admin';\nGRANT ALL PRIVILEGES ON McIlerna_Albor_Croft.* TO 'dba_mcilerna'@'localhost';\nGRANT SUPER, RELOAD, PROCESS ON *.* TO 'dba_mcilerna'@'localhost';\n</code></pre>"},{"location":"seguridad/#2-aplicacion-de-punto-de-venta","title":"2. Aplicaci\u00f3n de Punto de Venta","text":"<pre><code>CREATE USER 'app_pos'@'%' IDENTIFIED BY 'password_pos' REQUIRE SSL;\nGRANT SELECT, INSERT ON McIlerna_Albor_Croft.PEDIDO TO 'app_pos'@'%';\nGRANT SELECT, INSERT ON McIlerna_Albor_Croft.PEDIDO_VENTANILLA TO 'app_pos'@'%';\nGRANT SELECT, INSERT ON McIlerna_Albor_Croft.PEDIDO_DOMICILIO TO 'app_pos'@'%';\nGRANT SELECT, INSERT ON McIlerna_Albor_Croft.DETALLE_PEDIDO_PRODUCTO TO 'app_pos'@'%';\nGRANT SELECT, INSERT ON McIlerna_Albor_Croft.DETALLE_PEDIDO_MENU TO 'app_pos'@'%';\nGRANT SELECT ON McIlerna_Albor_Croft.PRODUCTO TO 'app_pos'@'%';\nGRANT SELECT ON McIlerna_Albor_Croft.MENU TO 'app_pos'@'%';\nGRANT SELECT ON McIlerna_Albor_Croft.REPARTIDOR TO 'app_pos'@'%';\n</code></pre>"},{"location":"seguridad/#3-usuario-de-reportes-solo-lectura","title":"3. Usuario de Reportes (Solo Lectura)","text":"<pre><code>CREATE USER 'reportes'@'localhost' IDENTIFIED BY 'password_reportes';\nGRANT SELECT ON McIlerna_Albor_Croft.* TO 'reportes'@'localhost';\n</code></pre>"},{"location":"seguridad/#4-usuario-de-backups","title":"4. Usuario de Backups","text":"<pre><code>CREATE USER 'backup_user'@'localhost' IDENTIFIED BY 'password_backup';\nGRANT SELECT, LOCK TABLES, SHOW VIEW, EVENT, TRIGGER ON McIlerna_Albor_Croft.* TO 'backup_user'@'localhost';\n</code></pre>"},{"location":"seguridad/#optimizacion-y-rendimiento","title":"Optimizaci\u00f3n y Rendimiento","text":""},{"location":"seguridad/#indices-recomendados","title":"\u00cdndices Recomendados","text":"<p>Adem\u00e1s de los \u00edndices autom\u00e1ticos en PKs y FKs:</p> <pre><code>-- Optimizaci\u00f3n para consultas por fecha (estad\u00edsticas diarias)\nCREATE INDEX idx_pedido_fecha ON PEDIDO(Fecha);\n\n-- Optimizaci\u00f3n para consultas por repartidor\nCREATE INDEX idx_pedido_domicilio_repartidor ON PEDIDO_DOMICILIO(Num_Repartidor);\n\n-- Optimizaci\u00f3n para b\u00fasqueda de productos por nombre\nCREATE INDEX idx_producto_nombre ON PRODUCTO(Nombre);\n\n-- \u00cdndice compuesto para estad\u00edsticas por fecha y tipo\nCREATE INDEX idx_pedido_fecha_hora ON PEDIDO(Fecha, Hora);\n</code></pre>"},{"location":"seguridad/#consultas-optimizadas","title":"Consultas Optimizadas","text":""},{"location":"seguridad/#estadistica-ticket-medio-por-canal","title":"Estad\u00edstica: Ticket Medio por Canal","text":"<pre><code>-- Versi\u00f3n optimizada con \u00edndices\nSELECT \n    'Ventanilla' AS Canal,\n    COUNT(DISTINCT p.Num_Pedido) AS Total_Pedidos,\n    SUM(\n        COALESCE(dpp.Cantidad * dpp.Precio_Venta, 0) + \n        COALESCE(dpm.Cantidad * dpm.Precio_Venta, 0)\n    ) AS Facturacion_Total,\n    AVG(\n        COALESCE(dpp.Cantidad * dpp.Precio_Venta, 0) + \n        COALESCE(dpm.Cantidad * dpm.Precio_Venta, 0)\n    ) AS Ticket_Medio\nFROM PEDIDO p\nINNER JOIN PEDIDO_VENTANILLA pv ON p.Num_Pedido = pv.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_PRODUCTO dpp ON p.Num_Pedido = dpp.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_MENU dpm ON p.Num_Pedido = dpm.Num_Pedido\nWHERE p.Fecha BETWEEN '2026-01-01' AND '2026-01-31'\n\nUNION ALL\n\nSELECT \n    'Domicilio' AS Canal,\n    COUNT(DISTINCT p.Num_Pedido),\n    SUM(\n        COALESCE(dpp.Cantidad * dpp.Precio_Venta, 0) + \n        COALESCE(dpm.Cantidad * dpm.Precio_Venta, 0)\n    ),\n    AVG(\n        COALESCE(dpp.Cantidad * dpp.Precio_Venta, 0) + \n        COALESCE(dpm.Cantidad * dpm.Precio_Venta, 0)\n    )\nFROM PEDIDO p\nINNER JOIN PEDIDO_DOMICILIO pd ON p.Num_Pedido = pd.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_PRODUCTO dpp ON p.Num_Pedido = dpp.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_MENU dpm ON p.Num_Pedido = dpm.Num_Pedido\nWHERE p.Fecha BETWEEN '2026-01-01' AND '2026-01-31';\n</code></pre>"},{"location":"seguridad/#configuracion-de-mysql-para-rendimiento","title":"Configuraci\u00f3n de MySQL para Rendimiento","text":"<pre><code># my.cnf - Configuraci\u00f3n optimizada para sistema de pedidos\n\n[mysqld]\n# Motor y cach\u00e9\ndefault-storage-engine=InnoDB\ninnodb_buffer_pool_size=2G\ninnodb_log_file_size=512M\n\n# Conexiones\nmax_connections=200\nthread_cache_size=50\n\n# Consultas\nquery_cache_type=1\nquery_cache_size=128M\n\n# Logs\nslow_query_log=1\nslow_query_log_file=/var/log/mysql/slow-query.log\nlong_query_time=2\n\n# Seguridad\nssl-ca=/etc/mysql/ssl/ca-cert.pem\nssl-cert=/etc/mysql/ssl/server-cert.pem\nssl-key=/etc/mysql/ssl/server-key.pem\n</code></pre>"},{"location":"seguridad/#plan-de-recuperacion-ante-desastres","title":"Plan de Recuperaci\u00f3n ante Desastres","text":""},{"location":"seguridad/#escenarios-y-procedimientos","title":"Escenarios y Procedimientos","text":""},{"location":"seguridad/#escenario-1-corrupcion-de-tabla","title":"Escenario 1: Corrupci\u00f3n de Tabla","text":"<pre><code>-- Verificar integridad\nCHECK TABLE PEDIDO;\n\n-- Reparar si es necesario\nREPAIR TABLE PEDIDO;\n\n-- Si falla, restaurar desde backup\n-- (Ver secci\u00f3n de Restauraci\u00f3n Completa)\n</code></pre>"},{"location":"seguridad/#escenario-2-perdida-total-del-servidor","title":"Escenario 2: P\u00e9rdida Total del Servidor","text":"<ol> <li>Provisionar nuevo servidor con MySQL</li> <li>Restaurar backup completo m\u00e1s reciente</li> <li>Aplicar logs binarios incrementales</li> <li>Verificar integridad de datos</li> <li>Actualizar DNS/IP de aplicaciones</li> <li>Tiempo estimado de recuperaci\u00f3n (RTO): 2 horas</li> <li>Punto de recuperaci\u00f3n objetivo (RPO): 1 hora</li> </ol>"},{"location":"seguridad/#escenario-3-borrado-accidental-de-datos","title":"Escenario 3: Borrado Accidental de Datos","text":"<pre><code>-- Iniciar transacci\u00f3n para pruebas\nSTART TRANSACTION;\n\n-- Restaurar en base de datos temporal\nCREATE DATABASE McIlerna_Temp;\n-- (Restaurar backup en McIlerna_Temp)\n\n-- Copiar datos espec\u00edficos\nINSERT INTO McIlerna_Albor_Croft.PEDIDO\nSELECT * FROM McIlerna_Temp.PEDIDO\nWHERE Num_Pedido BETWEEN 1000 AND 1050;\n\nCOMMIT;\n</code></pre>"},{"location":"seguridad/#evolucion-futura-integracion-con-ia","title":"Evoluci\u00f3n Futura: Integraci\u00f3n con IA","text":""},{"location":"seguridad/#prediccion-de-demanda","title":"Predicci\u00f3n de Demanda","text":"<p>Objetivo: Utilizar Machine Learning para predecir la demanda bas\u00e1ndose en: - Hist\u00f3rico de pedidos - D\u00eda de la semana - Eventos locales (partidos, festivales) - Condiciones meteorol\u00f3gicas</p> <p>Implementaci\u00f3n sugerida: <pre><code># Pseudoc\u00f3digo de integraci\u00f3n\nimport pandas as pd\nfrom sklearn.ensemble import RandomForestRegressor\n\n# Extraer datos hist\u00f3ricos\nquery = \"\"\"\n    SELECT Fecha, DAYOFWEEK(Fecha) AS Dia_Semana, \n           COUNT(*) AS Total_Pedidos\n    FROM PEDIDO\n    WHERE Fecha &gt;= DATE_SUB(CURDATE(), INTERVAL 1 YEAR)\n    GROUP BY Fecha\n\"\"\"\ndf = pd.read_sql(query, mysql_connection)\n\n# Entrenar modelo\nmodel = RandomForestRegressor()\nmodel.fit(df[['Dia_Semana']], df['Total_Pedidos'])\n\n# Predecir demanda para ma\u00f1ana\nprediccion = model.predict([[5]])  # Viernes\nprint(f\"Pedidos esperados: {prediccion[0]:.0f}\")\n</code></pre></p>"},{"location":"seguridad/#vista-materializada-para-analytics","title":"Vista Materializada para Analytics","text":"<pre><code>-- Crear vista para an\u00e1lisis r\u00e1pido\nCREATE VIEW V_ESTADISTICAS_DIARIAS AS\nSELECT \n    p.Fecha,\n    COUNT(DISTINCT p.Num_Pedido) AS Total_Pedidos,\n    COUNT(DISTINCT pv.Num_Pedido) AS Pedidos_Ventanilla,\n    COUNT(DISTINCT pd.Num_Pedido) AS Pedidos_Domicilio,\n    SUM(dpp.Cantidad * dpp.Precio_Venta) AS Ingresos_Productos,\n    SUM(dpm.Cantidad * dpm.Precio_Venta) AS Ingresos_Menus\nFROM PEDIDO p\nLEFT JOIN PEDIDO_VENTANILLA pv ON p.Num_Pedido = pv.Num_Pedido\nLEFT JOIN PEDIDO_DOMICILIO pd ON p.Num_Pedido = pd.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_PRODUCTO dpp ON p.Num_Pedido = dpp.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_MENU dpm ON p.Num_Pedido = dpm.Num_Pedido\nGROUP BY p.Fecha;\n</code></pre>"},{"location":"seguridad/#resumen-de-medidas-de-seguridad","title":"Resumen de Medidas de Seguridad","text":"Categor\u00eda Medida Implementada Estado Backups Completos diarios + Incrementales horarios \u2705 Implementado RGPD Anonimizaci\u00f3n autom\u00e1tica + Derecho al olvido \u2705 Implementado Cifrado SSL en conexiones + Tablespaces cifrados \u2705 Implementado Acceso 4 roles con m\u00ednimo privilegio \u2705 Implementado Auditor\u00eda Logs de acceso a datos personales \u2705 Implementado Recuperaci\u00f3n Plan de desastres con RTO 2h, RPO 1h \u2705 Documentado Optimizaci\u00f3n \u00cdndices estrat\u00e9gicos + Configuraci\u00f3n tuneada \u2705 Implementado Futuro Integraci\u00f3n con IA para predicci\u00f3n \ud83d\udccb Planificado <p>El sistema cumple con los est\u00e1ndares de seguridad, privacidad y rendimiento requeridos para un entorno de producci\u00f3n.</p>"},{"location":"implementacion/pruebas/","title":"Datos de Prueba y Validaci\u00f3n","text":"<p>Este documento contiene los scripts INSERT con datos de prueba, casos de uso simulados y consultas de validaci\u00f3n para verificar el correcto funcionamiento de la base de datos.</p>"},{"location":"implementacion/pruebas/#carga-de-datos-de-prueba","title":"Carga de Datos de Prueba","text":""},{"location":"implementacion/pruebas/#1-repartidores-uno-por-turno","title":"1. Repartidores (uno por turno)","text":"<pre><code>-- ============================================================\n-- INSERCI\u00d3N DE REPARTIDORES\n-- ============================================================\n\nINSERT INTO REPARTIDOR (Nombre, Apellido1, Apellido2, DNI, Telefono, Matricula_Moto, Turno)\nVALUES \n    ('Carlos', 'Garc\u00eda', 'L\u00f3pez', '12345678A', '600111222', '1234ABC', 'M'),\n    ('Mar\u00eda', 'Fern\u00e1ndez', 'Ruiz', '87654321B', '600333444', '5678DEF', 'T'),\n    ('Juan', 'Mart\u00ednez', 'S\u00e1nchez', '11223344C', '600555666', '9012GHI', 'N');\n\n-- Verificar inserci\u00f3n\nSELECT * FROM REPARTIDOR;\n</code></pre> <p>Resultado esperado: | Num_Repartidor | Nombre | Apellido1 | DNI | Turno | |:---------------|:-------|:----------|:----|:------| | 1 | Carlos | Garc\u00eda | 12345678A | M | | 2 | Mar\u00eda | Fern\u00e1ndez | 87654321B | T | | 3 | Juan | Mart\u00ednez | 11223344C | N |</p>"},{"location":"implementacion/pruebas/#2-productos-del-catalogo","title":"2. Productos del Cat\u00e1logo","text":"<pre><code>-- ============================================================\n-- INSERCI\u00d3N DE PRODUCTOS\n-- ============================================================\n\nINSERT INTO PRODUCTO (Nombre, Ingredientes, Precio)\nVALUES \n    ('Hamburguesa Cl\u00e1sica', 'Pan, carne de ternera, lechuga, tomate, cebolla, salsa especial. Contiene gluten.', 5.50),\n    ('Hamburguesa Doble', 'Pan, doble carne de ternera, queso cheddar, pepinillos, salsa BBQ. Contiene gluten y l\u00e1cteos.', 7.90),\n    ('Patatas Fritas Medianas', 'Patatas, aceite vegetal, sal. Puede contener trazas de gluten.', 2.50),\n    ('Patatas Fritas Grandes', 'Patatas, aceite vegetal, sal. Puede contener trazas de gluten.', 3.50),\n    ('Refresco Cola 500ml', 'Agua carbonatada, az\u00facar, cafe\u00edna, colorantes. Sin al\u00e9rgenos.', 2.00),\n    ('Refresco Naranja 500ml', 'Agua carbonatada, zumo de naranja, az\u00facar. Sin al\u00e9rgenos.', 2.00),\n    ('Nuggets de Pollo (6 uds)', 'Pechuga de pollo, empanado. Contiene gluten, huevo y soja.', 4.50),\n    ('Helado de Vainilla', 'Leche, nata, az\u00facar, vainilla. Contiene l\u00e1cteos.', 2.80);\n\n-- Verificar inserci\u00f3n\nSELECT Cod_Producto, Nombre, Precio FROM PRODUCTO;\n</code></pre>"},{"location":"implementacion/pruebas/#3-menus-promocionales","title":"3. Men\u00fas Promocionales","text":"<pre><code>-- ============================================================\n-- INSERCI\u00d3N DE MEN\u00daS\n-- ============================================================\n\nINSERT INTO MENU (Nombre, Descripcion, Precio)\nVALUES \n    ('Men\u00fa Ahorro', 'Hamburguesa Cl\u00e1sica + Patatas Medianas + Refresco. La opci\u00f3n econ\u00f3mica perfecta.', 8.50),\n    ('Men\u00fa Premium', 'Hamburguesa Doble + Patatas Grandes + Refresco + Helado. M\u00e1ximo sabor.', 13.90),\n    ('Men\u00fa Infantil', 'Nuggets de Pollo + Patatas Medianas + Refresco Naranja. Ideal para los m\u00e1s peque\u00f1os.', 7.50);\n\n-- Verificar inserci\u00f3n\nSELECT * FROM MENU;\n</code></pre>"},{"location":"implementacion/pruebas/#4-composicion-de-menus","title":"4. Composici\u00f3n de Men\u00fas","text":"<pre><code>-- ============================================================\n-- DEFINICI\u00d3N DE COMPOSICI\u00d3N DE MEN\u00daS\n-- ============================================================\n\n-- Men\u00fa Ahorro (Cod_Menu = 1)\nINSERT INTO COMPOSICION_MENU (Cod_Menu, Cod_Producto, Cantidad)\nVALUES \n    (1, 1, 1),  -- 1 Hamburguesa Cl\u00e1sica\n    (1, 3, 1),  -- 1 Patatas Medianas\n    (1, 5, 1);  -- 1 Refresco Cola\n\n-- Men\u00fa Premium (Cod_Menu = 2)\nINSERT INTO COMPOSICION_MENU (Cod_Menu, Cod_Producto, Cantidad)\nVALUES \n    (2, 2, 1),  -- 1 Hamburguesa Doble\n    (2, 4, 1),  -- 1 Patatas Grandes\n    (2, 5, 1),  -- 1 Refresco Cola\n    (2, 8, 1);  -- 1 Helado\n\n-- Men\u00fa Infantil (Cod_Menu = 3)\nINSERT INTO COMPOSICION_MENU (Cod_Menu, Cod_Producto, Cantidad)\nVALUES \n    (3, 7, 1),  -- 1 Nuggets\n    (3, 3, 1),  -- 1 Patatas Medianas\n    (3, 6, 1);  -- 1 Refresco Naranja\n\n-- Verificar composici\u00f3n\nSELECT \n    m.Nombre AS Menu,\n    p.Nombre AS Producto,\n    cm.Cantidad\nFROM COMPOSICION_MENU cm\nJOIN MENU m ON cm.Cod_Menu = m.Cod_Menu\nJOIN PRODUCTO p ON cm.Cod_Producto = p.Cod_Producto\nORDER BY m.Cod_Menu, p.Cod_Producto;\n</code></pre>"},{"location":"implementacion/pruebas/#casos-de-uso-simulados","title":"Casos de Uso Simulados","text":""},{"location":"implementacion/pruebas/#caso-1-pedido-en-ventanilla","title":"Caso 1: Pedido en Ventanilla","text":"<p>Escenario: Cliente en ventanilla 3 solicita 2 Men\u00fas Ahorro y 1 Patatas Grandes extra.</p> <pre><code>-- ============================================================\n-- CASO 1: PEDIDO EN VENTANILLA\n-- ============================================================\n\n-- Paso 1: Crear pedido base\nINSERT INTO PEDIDO (Fecha, Hora)\nVALUES ('2026-01-13', '12:30:00');\n\n-- Obtener el n\u00famero de pedido generado\nSET @num_pedido = LAST_INSERT_ID();\n\n-- Paso 2: Registrar como pedido de ventanilla\nINSERT INTO PEDIDO_VENTANILLA (Num_Pedido, Num_Ventanilla)\nVALUES (@num_pedido, 3);\n\n-- Paso 3: Agregar l\u00edneas de pedido (men\u00fas)\nINSERT INTO DETALLE_PEDIDO_MENU (Num_Pedido, Cod_Menu, Cantidad, Precio_Venta)\nVALUES (@num_pedido, 1, 2, 8.50);  -- 2 Men\u00fas Ahorro al precio actual\n\n-- Paso 4: Agregar producto individual\nINSERT INTO DETALLE_PEDIDO_PRODUCTO (Num_Pedido, Cod_Producto, Cantidad, Precio_Venta)\nVALUES (@num_pedido, 4, 1, 3.50);  -- 1 Patatas Grandes\n\n-- Verificar el pedido completo\nSELECT \n    p.Num_Pedido,\n    p.Fecha,\n    p.Hora,\n    pv.Num_Ventanilla,\n    'Ventanilla' AS Tipo_Pedido\nFROM PEDIDO p\nJOIN PEDIDO_VENTANILLA pv ON p.Num_Pedido = pv.Num_Pedido\nWHERE p.Num_Pedido = @num_pedido;\n\n-- Ver detalle del pedido\nSELECT \n    'Men\u00fa' AS Tipo,\n    m.Nombre AS Articulo,\n    dpm.Cantidad,\n    dpm.Precio_Venta,\n    (dpm.Cantidad * dpm.Precio_Venta) AS Subtotal\nFROM DETALLE_PEDIDO_MENU dpm\nJOIN MENU m ON dpm.Cod_Menu = m.Cod_Menu\nWHERE dpm.Num_Pedido = @num_pedido\n\nUNION ALL\n\nSELECT \n    'Producto' AS Tipo,\n    pr.Nombre AS Articulo,\n    dpp.Cantidad,\n    dpp.Precio_Venta,\n    (dpp.Cantidad * dpp.Precio_Venta) AS Subtotal\nFROM DETALLE_PEDIDO_PRODUCTO dpp\nJOIN PRODUCTO pr ON dpp.Cod_Producto = pr.Cod_Producto\nWHERE dpp.Num_Pedido = @num_pedido;\n</code></pre> <p>Resultado esperado: | Tipo | Articulo | Cantidad | Precio_Venta | Subtotal | |:-----|:---------|:---------|:-------------|:---------| | Men\u00fa | Men\u00fa Ahorro | 2 | 8.50 | 17.00 | | Producto | Patatas Fritas Grandes | 1 | 3.50 | 3.50 |</p> <p>Total del pedido: 20.50\u20ac</p>"},{"location":"implementacion/pruebas/#caso-2-pedido-a-domicilio","title":"Caso 2: Pedido a Domicilio","text":"<p>Escenario: Cliente solicita entrega a domicilio de 1 Men\u00fa Premium y 2 Hamburguesas Dobles. Repartidor asignado: Mar\u00eda (turno tarde).</p> <pre><code>-- ============================================================\n-- CASO 2: PEDIDO A DOMICILIO\n-- ============================================================\n\n-- Paso 1: Crear pedido base\nINSERT INTO PEDIDO (Fecha, Hora)\nVALUES ('2026-01-13', '19:45:00');\n\nSET @num_pedido = LAST_INSERT_ID();\n\n-- Paso 2: Registrar como pedido a domicilio con datos de entrega\nINSERT INTO PEDIDO_DOMICILIO (Num_Pedido, Telefono_Contacto, Poblacion, Direccion_Entrega, Num_Repartidor)\nVALUES (@num_pedido, '666777888', 'Jerez de la Frontera', 'Calle Real, 42, 3\u00ba B', 2);\n\n-- Paso 3: Agregar l\u00edneas de pedido\nINSERT INTO DETALLE_PEDIDO_MENU (Num_Pedido, Cod_Menu, Cantidad, Precio_Venta)\nVALUES (@num_pedido, 2, 1, 13.90);  -- 1 Men\u00fa Premium\n\nINSERT INTO DETALLE_PEDIDO_PRODUCTO (Num_Pedido, Cod_Producto, Cantidad, Precio_Venta)\nVALUES (@num_pedido, 2, 2, 7.90);  -- 2 Hamburguesas Dobles\n\n-- Verificar el pedido completo con datos del repartidor\nSELECT \n    p.Num_Pedido,\n    p.Fecha,\n    p.Hora,\n    pd.Telefono_Contacto,\n    pd.Direccion_Entrega,\n    pd.Poblacion,\n    CONCAT(r.Nombre, ' ', r.Apellido1) AS Repartidor,\n    r.Turno,\n    r.Matricula_Moto\nFROM PEDIDO p\nJOIN PEDIDO_DOMICILIO pd ON p.Num_Pedido = pd.Num_Pedido\nJOIN REPARTIDOR r ON pd.Num_Repartidor = r.Num_Repartidor\nWHERE p.Num_Pedido = @num_pedido;\n</code></pre> <p>Resultado esperado: | Num_Pedido | Fecha | Hora | Repartidor | Direccion_Entrega | |:-----------|:------|:-----|:-----------|:------------------| | 2 | 2026-01-13 | 19:45:00 | Mar\u00eda Fern\u00e1ndez | Calle Real, 42, 3\u00ba B |</p> <p>Total del pedido: 13.90 + (2 \u00d7 7.90) = 29.70\u20ac</p>"},{"location":"implementacion/pruebas/#caso-3-pedido-mixto-productos-y-menus","title":"Caso 3: Pedido Mixto (Productos y Men\u00fas)","text":"<pre><code>-- ============================================================\n-- CASO 3: PEDIDO MIXTO EN VENTANILLA\n-- ============================================================\n\nINSERT INTO PEDIDO (Fecha, Hora) VALUES ('2026-01-13', '14:15:00');\nSET @num_pedido = LAST_INSERT_ID();\n\nINSERT INTO PEDIDO_VENTANILLA (Num_Pedido, Num_Ventanilla) VALUES (@num_pedido, 1);\n\n-- 1 Men\u00fa Infantil + 1 Hamburguesa Cl\u00e1sica + 1 Helado\nINSERT INTO DETALLE_PEDIDO_MENU (Num_Pedido, Cod_Menu, Cantidad, Precio_Venta)\nVALUES (@num_pedido, 3, 1, 7.50);\n\nINSERT INTO DETALLE_PEDIDO_PRODUCTO (Num_Pedido, Cod_Producto, Cantidad, Precio_Venta)\nVALUES \n    (@num_pedido, 1, 1, 5.50),\n    (@num_pedido, 8, 1, 2.80);\n</code></pre>"},{"location":"implementacion/pruebas/#consultas-de-validacion","title":"Consultas de Validaci\u00f3n","text":""},{"location":"implementacion/pruebas/#validacion-1-integridad-referencial","title":"Validaci\u00f3n 1: Integridad Referencial","text":"<pre><code>-- ============================================================\n-- VERIFICAR INTEGRIDAD REFERENCIAL\n-- ============================================================\n\n-- Intentar insertar pedido a domicilio con repartidor inexistente (debe fallar)\nINSERT INTO PEDIDO (Fecha, Hora) VALUES ('2026-01-13', '20:00:00');\nSET @num_pedido_test = LAST_INSERT_ID();\n\n-- Esta consulta debe generar error de FK\nINSERT INTO PEDIDO_DOMICILIO (Num_Pedido, Telefono_Contacto, Poblacion, Direccion_Entrega, Num_Repartidor)\nVALUES (@num_pedido_test, '999999999', 'Test', 'Test', 999);\n-- ERROR 1452: Cannot add or update a child row: a foreign key constraint fails\n\n-- Limpiar pedido de prueba\nDELETE FROM PEDIDO WHERE Num_Pedido = @num_pedido_test;\n</code></pre>"},{"location":"implementacion/pruebas/#validacion-2-restricciones-check","title":"Validaci\u00f3n 2: Restricciones CHECK","text":"<pre><code>-- ============================================================\n-- VERIFICAR RESTRICCIONES CHECK\n-- ============================================================\n\n-- Intentar insertar producto con precio negativo (debe fallar)\nINSERT INTO PRODUCTO (Nombre, Ingredientes, Precio)\nVALUES ('Producto Test', 'Test', -5.00);\n-- ERROR 3819: Check constraint 'CHK_Producto_Precio' is violated\n\n-- Intentar insertar repartidor con turno inv\u00e1lido (debe fallar)\nINSERT INTO REPARTIDOR (Nombre, Apellido1, DNI, Turno)\nVALUES ('Test', 'Test', '99999999Z', 'X');\n-- ERROR 3819: Check constraint 'CHK_Repartidor_Turno' is violated\n</code></pre>"},{"location":"implementacion/pruebas/#validacion-3-clave-unica-dni","title":"Validaci\u00f3n 3: Clave \u00danica (DNI)","text":"<pre><code>-- ============================================================\n-- VERIFICAR CLAVE \u00daNICA EN DNI\n-- ============================================================\n\n-- Intentar insertar repartidor con DNI duplicado (debe fallar)\nINSERT INTO REPARTIDOR (Nombre, Apellido1, DNI, Turno)\nVALUES ('Duplicado', 'Test', '12345678A', 'M');\n-- ERROR 1062: Duplicate entry '12345678A' for key 'UK_Repartidor_DNI'\n</code></pre>"},{"location":"implementacion/pruebas/#validacion-4-cascada-en-borrado","title":"Validaci\u00f3n 4: Cascada en Borrado","text":"<pre><code>-- ============================================================\n-- VERIFICAR ON DELETE CASCADE\n-- ============================================================\n\n-- Crear pedido de prueba\nINSERT INTO PEDIDO (Fecha, Hora) VALUES ('2026-01-13', '23:00:00');\nSET @num_pedido_cascade = LAST_INSERT_ID();\n\nINSERT INTO PEDIDO_VENTANILLA (Num_Pedido, Num_Ventanilla) VALUES (@num_pedido_cascade, 5);\n\nINSERT INTO DETALLE_PEDIDO_PRODUCTO (Num_Pedido, Cod_Producto, Cantidad, Precio_Venta)\nVALUES (@num_pedido_cascade, 1, 1, 5.50);\n\n-- Verificar que existe\nSELECT * FROM PEDIDO WHERE Num_Pedido = @num_pedido_cascade;\nSELECT * FROM PEDIDO_VENTANILLA WHERE Num_Pedido = @num_pedido_cascade;\nSELECT * FROM DETALLE_PEDIDO_PRODUCTO WHERE Num_Pedido = @num_pedido_cascade;\n\n-- Eliminar pedido base (debe eliminar en cascada las extensiones y detalles)\nDELETE FROM PEDIDO WHERE Num_Pedido = @num_pedido_cascade;\n\n-- Verificar que se eliminaron en cascada\nSELECT * FROM PEDIDO_VENTANILLA WHERE Num_Pedido = @num_pedido_cascade;  -- 0 filas\nSELECT * FROM DETALLE_PEDIDO_PRODUCTO WHERE Num_Pedido = @num_pedido_cascade;  -- 0 filas\n</code></pre>"},{"location":"implementacion/pruebas/#consultas-estadisticas","title":"Consultas Estad\u00edsticas","text":""},{"location":"implementacion/pruebas/#estadistica-1-ticket-medio-por-canal","title":"Estad\u00edstica 1: Ticket Medio por Canal","text":"<pre><code>-- ============================================================\n-- CALCULAR TICKET MEDIO POR CANAL DE VENTA\n-- ============================================================\n\nSELECT \n    'Ventanilla' AS Canal,\n    COUNT(DISTINCT p.Num_Pedido) AS Total_Pedidos,\n    SUM(\n        COALESCE(dpp.Cantidad * dpp.Precio_Venta, 0) + \n        COALESCE(dpm.Cantidad * dpm.Precio_Venta, 0)\n    ) AS Facturacion_Total,\n    ROUND(\n        SUM(\n            COALESCE(dpp.Cantidad * dpp.Precio_Venta, 0) + \n            COALESCE(dpm.Cantidad * dpm.Precio_Venta, 0)\n        ) / COUNT(DISTINCT p.Num_Pedido), \n        2\n    ) AS Ticket_Medio\nFROM PEDIDO p\nINNER JOIN PEDIDO_VENTANILLA pv ON p.Num_Pedido = pv.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_PRODUCTO dpp ON p.Num_Pedido = dpp.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_MENU dpm ON p.Num_Pedido = dpm.Num_Pedido\n\nUNION ALL\n\nSELECT \n    'Domicilio' AS Canal,\n    COUNT(DISTINCT p.Num_Pedido),\n    SUM(\n        COALESCE(dpp.Cantidad * dpp.Precio_Venta, 0) + \n        COALESCE(dpm.Cantidad * dpm.Precio_Venta, 0)\n    ),\n    ROUND(\n        SUM(\n            COALESCE(dpp.Cantidad * dpp.Precio_Venta, 0) + \n            COALESCE(dpm.Cantidad * dpm.Precio_Venta, 0)\n        ) / COUNT(DISTINCT p.Num_Pedido), \n        2\n    )\nFROM PEDIDO p\nINNER JOIN PEDIDO_DOMICILIO pd ON p.Num_Pedido = pd.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_PRODUCTO dpp ON p.Num_Pedido = dpp.Num_Pedido\nLEFT JOIN DETALLE_PEDIDO_MENU dpm ON p.Num_Pedido = dpm.Num_Pedido;\n</code></pre>"},{"location":"implementacion/pruebas/#estadistica-2-pedidos-por-repartidor","title":"Estad\u00edstica 2: Pedidos por Repartidor","text":"<pre><code>-- ============================================================\n-- PEDIDOS ENTREGADOS POR CADA REPARTIDOR\n-- ============================================================\n\nSELECT \n    r.Num_Repartidor,\n    CONCAT(r.Nombre, ' ', r.Apellido1) AS Repartidor,\n    r.Turno,\n    COUNT(pd.Num_Pedido) AS Total_Pedidos_Entregados\nFROM REPARTIDOR r\nLEFT JOIN PEDIDO_DOMICILIO pd ON r.Num_Repartidor = pd.Num_Repartidor\nGROUP BY r.Num_Repartidor, r.Nombre, r.Apellido1, r.Turno\nORDER BY Total_Pedidos_Entregados DESC;\n</code></pre>"},{"location":"implementacion/pruebas/#estadistica-3-productos-mas-vendidos","title":"Estad\u00edstica 3: Productos M\u00e1s Vendidos","text":"<pre><code>-- ============================================================\n-- TOP 5 PRODUCTOS M\u00c1S VENDIDOS\n-- ============================================================\n\nSELECT \n    p.Nombre AS Producto,\n    SUM(dpp.Cantidad) AS Unidades_Vendidas,\n    ROUND(SUM(dpp.Cantidad * dpp.Precio_Venta), 2) AS Facturacion_Total\nFROM DETALLE_PEDIDO_PRODUCTO dpp\nJOIN PRODUCTO p ON dpp.Cod_Producto = p.Cod_Producto\nGROUP BY p.Cod_Producto, p.Nombre\nORDER BY Unidades_Vendidas DESC\nLIMIT 5;\n</code></pre>"},{"location":"implementacion/pruebas/#estadistica-4-menus-mas-populares","title":"Estad\u00edstica 4: Men\u00fas M\u00e1s Populares","text":"<pre><code>-- ============================================================\n-- MEN\u00daS M\u00c1S VENDIDOS\n-- ============================================================\n\nSELECT \n    m.Nombre AS Menu,\n    COUNT(dpm.Num_Pedido) AS Veces_Pedido,\n    SUM(dpm.Cantidad) AS Unidades_Totales,\n    ROUND(SUM(dpm.Cantidad * dpm.Precio_Venta), 2) AS Facturacion_Total\nFROM DETALLE_PEDIDO_MENU dpm\nJOIN MENU m ON dpm.Cod_Menu = m.Cod_Menu\nGROUP BY m.Cod_Menu, m.Nombre\nORDER BY Unidades_Totales DESC;\n</code></pre>"},{"location":"implementacion/pruebas/#resumen-de-validaciones","title":"Resumen de Validaciones","text":"Validaci\u00f3n Objetivo Estado Integridad Referencial Verificar que las FK rechazan valores inv\u00e1lidos \u2705 Validado Restricciones CHECK Verificar que se rechazan precios/cantidades negativas y turnos inv\u00e1lidos \u2705 Validado Clave \u00danica Verificar que no se permiten DNIs duplicados \u2705 Validado Cascada en Borrado Verificar que al eliminar un pedido se eliminan sus extensiones y detalles \u2705 Validado Datos de Prueba Insertar 3 repartidores, 8 productos, 3 men\u00fas y 3 pedidos \u2705 Completado Consultas Estad\u00edsticas Calcular ticket medio, productos m\u00e1s vendidos, pedidos por repartidor \u2705 Validado"},{"location":"implementacion/pruebas/#conclusiones-de-las-pruebas","title":"Conclusiones de las Pruebas","text":"<ol> <li>\u2705 Integridad de datos garantizada mediante claves for\u00e1neas y restricciones CHECK</li> <li>\u2705 Cascadas funcionando correctamente para mantener consistencia</li> <li>\u2705 Datos de prueba realistas que simulan operativa real</li> <li>\u2705 Consultas estad\u00edsticas eficientes para an\u00e1lisis de negocio</li> <li>\u2705 Sistema listo para producci\u00f3n tras validaciones exitosas</li> </ol> <p>El sistema ha superado todas las pruebas de validaci\u00f3n y est\u00e1 preparado para su uso en el entorno de producci\u00f3n de Mc Ilerna Albor Croft.</p>"},{"location":"implementacion/script-sql/","title":"Script SQL de Implementaci\u00f3n","text":"<p>Este documento contiene el c\u00f3digo DDL completo para la creaci\u00f3n de la base de datos Mc Ilerna Albor Croft. El script est\u00e1 dise\u00f1ado para MySQL/MariaDB con motor InnoDB.</p>"},{"location":"implementacion/script-sql/#creacion-de-la-base-de-datos","title":"Creaci\u00f3n de la Base de Datos","text":"<pre><code>-- ============================================================\n-- PROYECTO: Sistema de Gesti\u00f3n de Pedidos Mc Ilerna Albor Croft\n-- AUTOR: Juan Sevillano - Albor Croft ASIR\n-- FECHA: Enero 2026\n-- DESCRIPCI\u00d3N: Script DDL completo para creaci\u00f3n de base de datos\n-- ============================================================\n\n-- Eliminar base de datos si existe (PRECAUCI\u00d3N: solo en desarrollo)\nDROP DATABASE IF EXISTS McIlerna_Albor_Croft;\n\n-- Crear base de datos con charset UTF-8\nCREATE DATABASE McIlerna_Albor_Croft\n    DEFAULT CHARACTER SET utf8mb4\n    DEFAULT COLLATE utf8mb4_unicode_ci;\n\n-- Seleccionar la base de datos\nUSE McIlerna_Albor_Croft;\n</code></pre>"},{"location":"implementacion/script-sql/#tablas-maestras","title":"Tablas Maestras","text":""},{"location":"implementacion/script-sql/#tabla-repartidor","title":"Tabla: REPARTIDOR","text":"<pre><code>-- ============================================================\n-- TABLA: REPARTIDOR\n-- DESCRIPCI\u00d3N: Almacena informaci\u00f3n de empleados repartidores\n-- ============================================================\n\nCREATE TABLE REPARTIDOR (\n    Num_Repartidor INT AUTO_INCREMENT,\n    Nombre VARCHAR(50) NOT NULL,\n    Apellido1 VARCHAR(50) NOT NULL,\n    Apellido2 VARCHAR(50),\n    DNI VARCHAR(9) NOT NULL,\n    Telefono VARCHAR(15),\n    Matricula_Moto VARCHAR(10),\n    Turno CHAR(1) NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Repartidor PRIMARY KEY (Num_Repartidor),\n    CONSTRAINT UK_Repartidor_DNI UNIQUE (DNI),\n    CONSTRAINT CHK_Repartidor_Turno CHECK (Turno IN ('M', 'T', 'N'))\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Empleados repartidores con turnos asignados';\n</code></pre> <p>Comentarios: - <code>Num_Repartidor</code>: Clave primaria autoincremental - <code>DNI</code>: Clave alternativa \u00fanica para evitar duplicados - <code>Turno</code>: M=Ma\u00f1ana, T=Tarde, N=Noche (validado con CHECK)</p>"},{"location":"implementacion/script-sql/#tabla-producto","title":"Tabla: PRODUCTO","text":"<pre><code>-- ============================================================\n-- TABLA: PRODUCTO\n-- DESCRIPCI\u00d3N: Cat\u00e1logo de productos individuales\n-- ============================================================\n\nCREATE TABLE PRODUCTO (\n    Cod_Producto INT AUTO_INCREMENT,\n    Nombre VARCHAR(100) NOT NULL,\n    Ingredientes TEXT,\n    Precio DECIMAL(6,2) NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Producto PRIMARY KEY (Cod_Producto),\n    CONSTRAINT CHK_Producto_Precio CHECK (Precio &gt; 0)\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Productos individuales del cat\u00e1logo';\n</code></pre> <p>Comentarios: - <code>Ingredientes</code>: Texto libre para gesti\u00f3n de al\u00e9rgenos - <code>Precio</code>: DECIMAL(6,2) permite precios hasta 9999.99\u20ac</p>"},{"location":"implementacion/script-sql/#tabla-menu","title":"Tabla: MENU","text":"<pre><code>-- ============================================================\n-- TABLA: MENU\n-- DESCRIPCI\u00d3N: Men\u00fas compuestos con precio promocional\n-- ============================================================\n\nCREATE TABLE MENU (\n    Cod_Menu INT AUTO_INCREMENT,\n    Nombre VARCHAR(100) NOT NULL,\n    Descripcion TEXT,\n    Precio DECIMAL(6,2) NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Menu PRIMARY KEY (Cod_Menu),\n    CONSTRAINT CHK_Menu_Precio CHECK (Precio &gt; 0)\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Men\u00fas promocionales con precio especial';\n</code></pre>"},{"location":"implementacion/script-sql/#tablas-de-pedidos-jerarquia-con-extensiones","title":"Tablas de Pedidos (Jerarqu\u00eda con Extensiones)","text":""},{"location":"implementacion/script-sql/#tabla-base-pedido","title":"Tabla Base: PEDIDO","text":"<pre><code>-- ============================================================\n-- TABLA: PEDIDO\n-- DESCRIPCI\u00d3N: Tabla base para todos los pedidos (ventanilla y domicilio)\n-- ============================================================\n\nCREATE TABLE PEDIDO (\n    Num_Pedido INT AUTO_INCREMENT,\n    Fecha DATE NOT NULL,\n    Hora TIME NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Pedido PRIMARY KEY (Num_Pedido)\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Tabla base con numeraci\u00f3n correlativa \u00fanica de pedidos';\n</code></pre> <p>Comentarios: - Numeraci\u00f3n correlativa \u00fanica para ventanilla y domicilio - Las extensiones se definen en tablas separadas (1:1)</p>"},{"location":"implementacion/script-sql/#extension-pedido_ventanilla","title":"Extensi\u00f3n: PEDIDO_VENTANILLA","text":"<pre><code>-- ============================================================\n-- TABLA: PEDIDO_VENTANILLA\n-- DESCRIPCI\u00d3N: Extensi\u00f3n de PEDIDO para pedidos en ventanilla\n-- ============================================================\n\nCREATE TABLE PEDIDO_VENTANILLA (\n    Num_Pedido INT,\n    Num_Ventanilla INT NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Pedido_Ventanilla PRIMARY KEY (Num_Pedido),\n    CONSTRAINT FK_PedidoVentanilla_Pedido \n        FOREIGN KEY (Num_Pedido) \n        REFERENCES PEDIDO(Num_Pedido)\n        ON DELETE CASCADE\n        ON UPDATE CASCADE\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Pedidos realizados en ventanilla (extensi\u00f3n 1:1 de PEDIDO)';\n</code></pre> <p>Comentarios: - <code>ON DELETE CASCADE</code>: Al eliminar un pedido base, se elimina autom\u00e1ticamente su extensi\u00f3n - Relaci\u00f3n 1:1 con PEDIDO (un pedido solo puede ser de ventanilla O de domicilio)</p>"},{"location":"implementacion/script-sql/#extension-pedido_domicilio","title":"Extensi\u00f3n: PEDIDO_DOMICILIO","text":"<pre><code>-- ============================================================\n-- TABLA: PEDIDO_DOMICILIO\n-- DESCRIPCI\u00d3N: Extensi\u00f3n de PEDIDO para pedidos a domicilio\n-- ============================================================\n\nCREATE TABLE PEDIDO_DOMICILIO (\n    Num_Pedido INT,\n    Telefono_Contacto VARCHAR(15) NOT NULL,\n    Poblacion VARCHAR(100) NOT NULL,\n    Direccion_Entrega VARCHAR(200) NOT NULL,\n    Num_Repartidor INT NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Pedido_Domicilio PRIMARY KEY (Num_Pedido),\n    CONSTRAINT FK_PedidoDomicilio_Pedido \n        FOREIGN KEY (Num_Pedido) \n        REFERENCES PEDIDO(Num_Pedido)\n        ON DELETE CASCADE\n        ON UPDATE CASCADE,\n    CONSTRAINT FK_PedidoDomicilio_Repartidor \n        FOREIGN KEY (Num_Repartidor) \n        REFERENCES REPARTIDOR(Num_Repartidor)\n        ON DELETE RESTRICT\n        ON UPDATE CASCADE\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Pedidos con entrega a domicilio (extensi\u00f3n 1:1 de PEDIDO)';\n</code></pre> <p>Comentarios: - <code>ON DELETE RESTRICT</code> en Repartidor: No se puede eliminar un repartidor con pedidos asignados - Relaci\u00f3n N:1 con REPARTIDOR (un repartidor puede tener m\u00faltiples pedidos)</p>"},{"location":"implementacion/script-sql/#tablas-de-relacion-nm","title":"Tablas de Relaci\u00f3n (N:M)","text":""},{"location":"implementacion/script-sql/#composicion_menu","title":"COMPOSICION_MENU","text":"<pre><code>-- ============================================================\n-- TABLA: COMPOSICION_MENU\n-- DESCRIPCI\u00d3N: Relaci\u00f3n N:M entre MENU y PRODUCTO\n-- ============================================================\n\nCREATE TABLE COMPOSICION_MENU (\n    Cod_Menu INT,\n    Cod_Producto INT,\n    Cantidad INT NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Composicion_Menu PRIMARY KEY (Cod_Menu, Cod_Producto),\n    CONSTRAINT FK_ComposicionMenu_Menu \n        FOREIGN KEY (Cod_Menu) \n        REFERENCES MENU(Cod_Menu)\n        ON DELETE CASCADE\n        ON UPDATE CASCADE,\n    CONSTRAINT FK_ComposicionMenu_Producto \n        FOREIGN KEY (Cod_Producto) \n        REFERENCES PRODUCTO(Cod_Producto)\n        ON DELETE RESTRICT\n        ON UPDATE CASCADE,\n    CONSTRAINT CHK_ComposicionMenu_Cantidad CHECK (Cantidad &gt; 0)\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Define qu\u00e9 productos componen cada men\u00fa';\n</code></pre> <p>Ejemplo: Men\u00fa Ahorro = 1 Hamburguesa + 1 Bebida + 1 Patatas</p>"},{"location":"implementacion/script-sql/#detalle_pedido_producto","title":"DETALLE_PEDIDO_PRODUCTO","text":"<pre><code>-- ============================================================\n-- TABLA: DETALLE_PEDIDO_PRODUCTO\n-- DESCRIPCI\u00d3N: L\u00edneas de pedido para productos individuales\n-- ============================================================\n\nCREATE TABLE DETALLE_PEDIDO_PRODUCTO (\n    Num_Pedido INT,\n    Cod_Producto INT,\n    Cantidad INT NOT NULL,\n    Precio_Venta DECIMAL(6,2) NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Detalle_Pedido_Producto PRIMARY KEY (Num_Pedido, Cod_Producto),\n    CONSTRAINT FK_DetallePedidoProducto_Pedido \n        FOREIGN KEY (Num_Pedido) \n        REFERENCES PEDIDO(Num_Pedido)\n        ON DELETE CASCADE\n        ON UPDATE CASCADE,\n    CONSTRAINT FK_DetallePedidoProducto_Producto \n        FOREIGN KEY (Cod_Producto) \n        REFERENCES PRODUCTO(Cod_Producto)\n        ON DELETE RESTRICT\n        ON UPDATE CASCADE,\n    CONSTRAINT CHK_DetallePedidoProducto_Cantidad CHECK (Cantidad &gt; 0),\n    CONSTRAINT CHK_DetallePedidoProducto_Precio CHECK (Precio_Venta &gt; 0)\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Productos individuales incluidos en cada pedido';\n</code></pre> <p>Comentarios: - <code>Precio_Venta</code>: Almacena el precio en el momento de la venta (hist\u00f3rico) - Permite aplicar descuentos sin modificar el cat\u00e1logo</p>"},{"location":"implementacion/script-sql/#detalle_pedido_menu","title":"DETALLE_PEDIDO_MENU","text":"<pre><code>-- ============================================================\n-- TABLA: DETALLE_PEDIDO_MENU\n-- DESCRIPCI\u00d3N: L\u00edneas de pedido para men\u00fas\n-- ============================================================\n\nCREATE TABLE DETALLE_PEDIDO_MENU (\n    Num_Pedido INT,\n    Cod_Menu INT,\n    Cantidad INT NOT NULL,\n    Precio_Venta DECIMAL(6,2) NOT NULL,\n\n    -- Restricciones\n    CONSTRAINT PK_Detalle_Pedido_Menu PRIMARY KEY (Num_Pedido, Cod_Menu),\n    CONSTRAINT FK_DetallePedidoMenu_Pedido \n        FOREIGN KEY (Num_Pedido) \n        REFERENCES PEDIDO(Num_Pedido)\n        ON DELETE CASCADE\n        ON UPDATE CASCADE,\n    CONSTRAINT FK_DetallePedidoMenu_Menu \n        FOREIGN KEY (Cod_Menu) \n        REFERENCES MENU(Cod_Menu)\n        ON DELETE RESTRICT\n        ON UPDATE CASCADE,\n    CONSTRAINT CHK_DetallePedidoMenu_Cantidad CHECK (Cantidad &gt; 0),\n    CONSTRAINT CHK_DetallePedidoMenu_Precio CHECK (Precio_Venta &gt; 0)\n) ENGINE=InnoDB \n  DEFAULT CHARSET=utf8mb4 \n  COLLATE=utf8mb4_unicode_ci\n  COMMENT='Men\u00fas incluidos en cada pedido';\n</code></pre>"},{"location":"implementacion/script-sql/#indices-adicionales-para-optimizacion","title":"\u00cdndices Adicionales para Optimizaci\u00f3n","text":"<pre><code>-- ============================================================\n-- \u00cdNDICES PARA OPTIMIZACI\u00d3N DE CONSULTAS\n-- ============================================================\n\n-- \u00cdndice para consultas por fecha (estad\u00edsticas diarias)\nCREATE INDEX idx_pedido_fecha ON PEDIDO(Fecha);\n\n-- \u00cdndice para consultas por repartidor\nCREATE INDEX idx_pedido_domicilio_repartidor ON PEDIDO_DOMICILIO(Num_Repartidor);\n\n-- \u00cdndice para b\u00fasqueda de productos por nombre\nCREATE INDEX idx_producto_nombre ON PRODUCTO(Nombre);\n\n-- \u00cdndice compuesto para estad\u00edsticas por fecha y hora\nCREATE INDEX idx_pedido_fecha_hora ON PEDIDO(Fecha, Hora);\n</code></pre>"},{"location":"implementacion/script-sql/#verificacion-de-la-estructura","title":"Verificaci\u00f3n de la Estructura","text":"<pre><code>-- ============================================================\n-- VERIFICACI\u00d3N DE TABLAS CREADAS\n-- ============================================================\n\n-- Mostrar todas las tablas\nSHOW TABLES;\n\n-- Verificar estructura de cada tabla\nDESCRIBE REPARTIDOR;\nDESCRIBE PRODUCTO;\nDESCRIBE MENU;\nDESCRIBE PEDIDO;\nDESCRIBE PEDIDO_VENTANILLA;\nDESCRIBE PEDIDO_DOMICILIO;\nDESCRIBE COMPOSICION_MENU;\nDESCRIBE DETALLE_PEDIDO_PRODUCTO;\nDESCRIBE DETALLE_PEDIDO_MENU;\n\n-- Verificar claves for\u00e1neas\nSELECT \n    TABLE_NAME,\n    COLUMN_NAME,\n    CONSTRAINT_NAME,\n    REFERENCED_TABLE_NAME,\n    REFERENCED_COLUMN_NAME\nFROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE\nWHERE TABLE_SCHEMA = 'McIlerna_Albor_Croft'\n  AND REFERENCED_TABLE_NAME IS NOT NULL\nORDER BY TABLE_NAME, COLUMN_NAME;\n</code></pre>"},{"location":"implementacion/script-sql/#resumen-de-la-implementacion","title":"Resumen de la Implementaci\u00f3n","text":""},{"location":"implementacion/script-sql/#tablas-creadas","title":"Tablas Creadas","text":"# Tabla Tipo Descripci\u00f3n 1 <code>REPARTIDOR</code> Maestra Empleados repartidores 2 <code>PRODUCTO</code> Maestra Cat\u00e1logo de productos 3 <code>MENU</code> Maestra Cat\u00e1logo de men\u00fas 4 <code>PEDIDO</code> Base Pedidos (tabla base) 5 <code>PEDIDO_VENTANILLA</code> Extensi\u00f3n Pedidos en ventanilla 6 <code>PEDIDO_DOMICILIO</code> Extensi\u00f3n Pedidos a domicilio 7 <code>COMPOSICION_MENU</code> Relaci\u00f3n Men\u00fa \u2194 Producto 8 <code>DETALLE_PEDIDO_PRODUCTO</code> Relaci\u00f3n Pedido \u2194 Producto 9 <code>DETALLE_PEDIDO_MENU</code> Relaci\u00f3n Pedido \u2194 Men\u00fa"},{"location":"implementacion/script-sql/#restricciones-implementadas","title":"Restricciones Implementadas","text":"<ul> <li>\u2705 9 Claves Primarias (todas con AUTO_INCREMENT donde aplica)</li> <li>\u2705 9 Claves For\u00e1neas con integridad referencial</li> <li>\u2705 1 Clave Alternativa (DNI en REPARTIDOR)</li> <li>\u2705 7 Restricciones CHECK (precios, cantidades, turnos)</li> <li>\u2705 ON DELETE CASCADE en extensiones y detalles de pedido</li> <li>\u2705 ON DELETE RESTRICT en referencias a cat\u00e1logos</li> </ul>"},{"location":"implementacion/script-sql/#caracteristicas-tecnicas","title":"Caracter\u00edsticas T\u00e9cnicas","text":"<ul> <li>Motor: InnoDB (soporte transaccional ACID)</li> <li>Charset: UTF-8 (utf8mb4_unicode_ci)</li> <li>Normalizaci\u00f3n: Tercera Forma Normal (3FN)</li> <li>\u00cdndices: 4 \u00edndices adicionales para optimizaci\u00f3n</li> </ul>"},{"location":"implementacion/script-sql/#ejecucion-del-script","title":"Ejecuci\u00f3n del Script","text":"<p>Para ejecutar este script completo:</p> <pre><code># Desde l\u00ednea de comandos\nmysql -u root -p &lt; script_mcilerna.sql\n\n# O desde MySQL CLI\nmysql&gt; SOURCE /ruta/al/script_mcilerna.sql;\n</code></pre> <p>Nota: Aseg\u00farate de tener permisos suficientes para crear bases de datos.</p>"},{"location":"implementacion/script-sql/#siguiente-paso","title":"Siguiente Paso","text":"<p>Una vez creada la estructura, proceder con la carga de datos de prueba documentada en pruebas.md.</p>"}]}